[
  {
    "id": "created_at_display",
    "name": "Created at display",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "concat",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "constant",
            "value": "Created ",
            "value_type": "string"
          },
          {
            "type": "date",
            "components": {
              "type": "stat",
              "stat": "created_at"
            }
          }
        ]
      }
    }
  },
  {
    "id": "photo",
    "name": "Photo",
    "type": "base",
    "value_type": "photo",
    "default_value": null
  },
  {
    "id": "name",
    "name": "Name",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "alignment",
    "name": "Alignment",
    "type": "base",
    "value_type": "string",
    "default_value": "true_neutral"
  },
  {
    "id": "personality_traits",
    "name": "Personality traits",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "ideals",
    "name": "Ideals",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "bonds",
    "name": "Bonds",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "flaws",
    "name": "Flaws",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "about",
    "name": "About",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "notes",
    "name": "Notes",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "note",
    "default_value": []
  },
  {
    "id": "base_hp",
    "name": "Base HP",
    "type": "base",
    "value_type": "integer",
    "default_value": 1
  },
  {
    "id": "current_hp",
    "name": "Current HP",
    "type": "base",
    "value_type": "integer",
    "default_value": 1
  },
  {
    "id": "max_hp",
    "name": "Maximum HP",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "base_hp"
          },
          {
            "type": "stat",
            "stat": "classes_hp_mods"
          }
        ]
      }
    }
  },
  {
    "id": "hit_point_mode",
    "name": "Hit point mode",
    "type": "base",
    "value_type": "string",
    "default_value": "roll"
  },
  {
    "id": "classes_hp_mods",
    "name": "Classes HP mods",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "max",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "constant",
            "value": 0,
            "value_type": "integer"
          },
          {
            "type": "multiply",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "level"
                },
                {
                  "type": "max",
                  "components": {
                    "type": "map",
                    "map_value_key": "$class",
                    "components": {
                      "type": "stat",
                      "stat": "classes"
                    },
                    "mapper": {
                      "type": "add",
                      "components": {
                        "type": "map",
                        "components": {
                          "type": "defaultIfNull",
                          "components": {
                            "type": "stat",
                            "stat": "$class.class.selected_archetype?.actual_hp_modifiers"
                          },
                          "default_components": {
                            "type": "stat",
                            "stat": "$class.class.actual_hp_modifiers"
                          }
                        },
                        "mapper": {
                          "type": "metaStat",
                          "meta_stat": {
                            "type": "concat",
                            "components": {
                              "type": "list",
                              "components": [
                                {
                                  "type": "stat",
                                  "stat": "$mapValue"
                                },
                                {
                                  "type": "constant",
                                  "value": "_modifier",
                                  "value_type": "string"
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          }
        ]
      }
    }
  },
  {
    "id": "current_d4_hit_dice",
    "name": "Hit Dice (d4)",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_d4_hit_dice",
    "name": "Max d4 hit dice",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "filter",
          "filter_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "filter": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$class.class.actual_hit_die"
                },
                {
                  "type": "constant",
                  "value": "d4",
                  "value_type": "string"
                }
              ]
            }
          }
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "current_d6_hit_dice",
    "name": "Hit Dice (d6)",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_d6_hit_dice",
    "name": "Max d6 hit dice",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "filter",
          "filter_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "filter": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$class.class.actual_hit_die"
                },
                {
                  "type": "constant",
                  "value": "d6",
                  "value_type": "string"
                }
              ]
            }
          }
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "current_d8_hit_dice",
    "name": "Hit Dice (d8)",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_d8_hit_dice",
    "name": "Max d8 hit dice",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "filter",
          "filter_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "filter": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$class.class.actual_hit_die"
                },
                {
                  "type": "constant",
                  "value": "d8",
                  "value_type": "string"
                }
              ]
            }
          }
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "current_d10_hit_dice",
    "name": "Hit Dice (d10)",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_d10_hit_dice",
    "name": "Max d10 hit dice",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "filter",
          "filter_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "filter": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$class.class.actual_hit_die"
                },
                {
                  "type": "constant",
                  "value": "d10",
                  "value_type": "string"
                }
              ]
            }
          }
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "current_d12_hit_dice",
    "name": "Hit Dice (d12)",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_d12_hit_dice",
    "name": "Max d12 hit dice",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "filter",
          "filter_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "filter": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$class.class.actual_hit_die"
                },
                {
                  "type": "constant",
                  "value": "d12",
                  "value_type": "string"
                }
              ]
            }
          }
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "current_d20_hit_dice",
    "name": "Hit Dice (d20)",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_d20_hit_dice",
    "name": "Max d20 hit dice",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "filter",
          "filter_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "filter": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$class.class.actual_hit_die"
                },
                {
                  "type": "constant",
                  "value": "d20",
                  "value_type": "string"
                }
              ]
            }
          }
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "total_hit_dice",
    "name": "Hit Dice (total)",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "current_d4_hit_dice"
          },
          {
            "type": "stat",
            "stat": "current_d6_hit_dice"
          },
          {
            "type": "stat",
            "stat": "current_d8_hit_dice"
          },
          {
            "type": "stat",
            "stat": "current_d10_hit_dice"
          },
          {
            "type": "stat",
            "stat": "current_d12_hit_dice"
          },
          {
            "type": "stat",
            "stat": "current_d20_hit_dice"
          }
        ]
      }
    }
  },
  {
    "id": "description",
    "name": "Description",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "concat",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "defaultIfNull",
            "components": {
              "type": "stat",
              "stat": "race.selected_subrace?.name"
            },
            "default_components": {
              "type": "stat",
              "stat": "race.name"
            }
          },
          {
            "type": "constant",
            "value": " ",
            "value_type": "string"
          },
          {
            "type": "joinToString",
            "separator": " / ",
            "components": {
              "type": "map",
              "map_value_key": "$class",
              "components": {
                "type": "stat",
                "stat": "classes"
              },
              "mapper": {
                "type": "concat",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class.name"
                    },
                    {
                      "type": "constant",
                      "value": " ",
                      "value_type": "string"
                    },
                    {
                      "type": "stat",
                      "stat": "$class.class_level"
                    }
                  ]
                }
              }
            }
          }
        ]
      }
    }
  },
  {
    "id": "classes",
    "name": "Classes",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "class_details",
    "default_value": []
  },
  {
    "id": "background",
    "name": "Background",
    "type": "base",
    "value_type": "resource",
    "resource_type": "background",
    "default_value": null
  },
  {
    "id": "race",
    "name": "Race",
    "type": "base",
    "value_type": "resource",
    "resource_type": "race",
    "default_value": null
  },
  {
    "id": "subrace_id",
    "name": "Subrace ID",
    "type": "base",
    "value_type": "string",
    "default_value": null
  },
  {
    "id": "racial_traits",
    "name": "Racial traits",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "components": {
      "type": "sortBy",
      "order": "asc",
      "components": {
        "type": "filter",
        "components": {
          "type": "flatAppend",
          "components": [
            {
              "type": "stat",
              "stat": "race.traits"
            },
            {
              "type": "defaultIfNull",
              "components": {
                "type": "stat",
                "stat": "race.selected_subrace?.traits"
              },
              "default_components": {
                "type": "list",
                "components": []
              }
            }
          ]
        },
        "filter": {
          "type": "lessThanEquals",
          "components": {
            "type": "list",
            "components": [
              {
                "type": "stat",
                "stat": "$filterValue.min_level"
              },
              {
                "type": "stat",
                "stat": "level"
              }
            ]
          }
        }
      },
      "sort_by_selector": {
        "type": "stat",
        "stat": "$sortByValue.min_level"
      }
    }
  },
  {
    "id": "advantages",
    "name": "Advantages",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "disadvantages",
    "name": "Disadvantages",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "is_not_wearing_inproficient_armor",
    "name": "Character is not currently wearing a piece of armor its not proficient with",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "or",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "isNull",
            "components": {
              "type": "stat",
              "stat": "equipped_armor"
            }
          },
          {
            "type": "defaultIfNull",
            "components": {
              "type": "stat",
              "stat": "equipped_armor?.is_proficient?"
            },
            "default_components": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            }
          }
        ]
      }
    }
  },
  {
    "id": "armor_disadvantages",
    "name": "Armor disadvantages",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "stat",
            "stat": "is_not_wearing_inproficient_armor"
          },
          "components": {
            "type": "list",
            "components": []
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "list",
            "components": [
              {
                "type": "constant",
                "value": "strength_modifier",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "dexterity_modifier",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "strength_saving_throw",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "dexterity_saving_throw",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "athletics",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "acrobatics",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "sleight_of_hand",
                "value_type": "string"
              },
              {
                "type": "constant",
                "value": "stealth",
                "value_type": "string"
              }
            ]
          }
        }
      ]
    }
  },
  {
    "id": "equipped_armor_imposes_stealth_disadvantage",
    "name": "Equipped armor imposes stealth disadvantage",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "defaultIfNull",
      "components": {
        "type": "stat",
        "stat": "equipped_armor?.impose_stealth_disadvantage"
      },
      "default_components": {
        "type": "constant",
        "value": false,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "all_disadvantages",
    "name": "Disadvantages",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "string",
    "components": {
      "type": "flatAppend",
      "treat_as_set": true,
      "components": [
        {
          "type": "stat",
          "stat": "disadvantages"
        },
        {
          "type": "stat",
          "stat": "armor_disadvantages"
        },
        {
          "type": "when",
          "clauses": [
            {
              "condition": {
                "type": "stat",
                "stat": "equipped_armor_imposes_stealth_disadvantage"
              },
              "components": {
                "type": "list",
                "components": [
                  {
                    "type": "constant",
                    "value": "stealth",
                    "value_type": "string"
                  }
                ]
              }
            },
            {
              "condition": {
                "type": "constant",
                "value": true,
                "value_type": "bool"
              },
              "components": {
                "type": "list",
                "components": []
              }
            }
          ]
        }
      ]
    }
  },
  {
    "id": "language_proficiencies",
    "name": "Language proficiencies",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "armor_proficiencies",
    "name": "Armor proficiencies",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "weapon_proficiencies",
    "name": "Weapon proficiencies",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "tool_proficiencies",
    "name": "Tool proficiencies",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "acrobatics_proficiency",
    "name": "Acrobatics proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "acrobatics",
    "name": "Acrobatics",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "dexterity_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "acrobatics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "acrobatics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "acrobatics_formatted",
    "name": "Acrobatics formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "acrobatics"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "acrobatics"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "acrobatics"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "acrobatics_color",
    "name": "Acrobatics number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "acrobatics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "acrobatics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "acrobatics_label_color",
    "name": "Acrobatics label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "acrobatics_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "animal_handling_proficiency",
    "name": "Animal Handling proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "animal_handling",
    "name": "Animal Handling",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "wisdom_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "animal_handling_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "animal_handling_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "animal_handling_formatted",
    "name": "Animal Handling formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "animal_handling"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "animal_handling"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "animal_handling"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "animal_handling_color",
    "name": "Animal Handling number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "animal_handling_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "animal_handling_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "animal_handling_label_color",
    "name": "Animal Handling label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "animal_handling_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "arcana_proficiency",
    "name": "Arcana proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "arcana",
    "name": "Arcana",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "intelligence_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "arcana_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "arcana_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "arcana_formatted",
    "name": "Arcana formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "arcana"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "arcana"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "arcana"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "arcana_color",
    "name": "Arcana number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "arcana_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "arcana_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "arcana_label_color",
    "name": "Arcana label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "arcana_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "athletics_proficiency",
    "name": "Athletics proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "athletics",
    "name": "Athletics",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "strength_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "athletics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "athletics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "athletics_formatted",
    "name": "Athletics formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "athletics"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "athletics"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "athletics"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "athletics_color",
    "name": "Athletics number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "athletics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "athletics_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "athletics_label_color",
    "name": "Athletics label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "athletics_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "deception_proficiency",
    "name": "Deception proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "deception",
    "name": "Deception",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "charisma_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "deception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "deception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "deception_formatted",
    "name": "Deception formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "deception"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "deception"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "deception"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "deception_color",
    "name": "Deception number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "deception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "deception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "deception_label_color",
    "name": "Deception label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "deception_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "history_proficiency",
    "name": "History proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "history",
    "name": "History",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "intelligence_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "history_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "history_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "history_formatted",
    "name": "History formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "history"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "history"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "history"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "history_color",
    "name": "History number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "history_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "history_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "history_label_color",
    "name": "History label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "history_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "insight_proficiency",
    "name": "Insight proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "insight",
    "name": "Insight",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "wisdom_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "insight_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "insight_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "insight_formatted",
    "name": "Insight formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "insight"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "insight"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "insight"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "insight_color",
    "name": "Insight number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "insight_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "insight_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "insight_label_color",
    "name": "Insight label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "insight_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "intimidation_proficiency",
    "name": "Intimidation proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "intimidation",
    "name": "Intimidation",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "charisma_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "intimidation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "intimidation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "intimidation_formatted",
    "name": "Intimidation formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "intimidation"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "intimidation"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "intimidation"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "intimidation_color",
    "name": "Intimidation number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "intimidation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "intimidation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "intimidation_label_color",
    "name": "Intimidation label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "intimidation_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "investigation_proficiency",
    "name": "Investigation proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "investigation",
    "name": "Investigation",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "intelligence_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "investigation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "investigation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "investigation_formatted",
    "name": "Investigation formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "investigation"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "investigation"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "investigation"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "investigation_color",
    "name": "Investigation number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "investigation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "investigation_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "investigation_label_color",
    "name": "Investigation label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "investigation_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "medicine_proficiency",
    "name": "Medicine proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "medicine",
    "name": "Medicine",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "wisdom_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "medicine_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "medicine_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "medicine_formatted",
    "name": "Medicine formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "medicine"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "medicine"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "medicine"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "medicine_color",
    "name": "Medicine number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "medicine_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "medicine_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "medicine_label_color",
    "name": "Medicine label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "medicine_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "nature_proficiency",
    "name": "Nature proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "nature",
    "name": "Nature",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "intelligence_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "nature_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "nature_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "nature_formatted",
    "name": "Nature formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "nature"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "nature"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "nature"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "nature_color",
    "name": "Nature number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "nature_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "nature_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "nature_label_color",
    "name": "Nature label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "nature_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "perception_proficiency",
    "name": "Perception proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "perception",
    "name": "Perception",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "wisdom_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "perception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "perception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "perception_formatted",
    "name": "Perception formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "perception"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "perception"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "perception"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "perception_color",
    "name": "Perception number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "perception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "perception_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "perception_label_color",
    "name": "Perception label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "perception_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "performance_proficiency",
    "name": "Performance proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "performance",
    "name": "Performance",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "charisma_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "performance_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "performance_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "performance_formatted",
    "name": "Performance formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "performance"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "performance"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "performance"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "performance_color",
    "name": "Performance number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "performance_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "performance_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "performance_label_color",
    "name": "Performance label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "performance_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "persuasion_proficiency",
    "name": "Persuasion proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "persuasion",
    "name": "Persuasion",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "charisma_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "persuasion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "persuasion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "persuasion_formatted",
    "name": "Persuasion formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "persuasion"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "persuasion"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "persuasion"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "persuasion_color",
    "name": "Persuasion number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "persuasion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "persuasion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "persuasion_label_color",
    "name": "Persuasion label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "persuasion_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "religion_proficiency",
    "name": "Religion proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "religion",
    "name": "Religion",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "intelligence_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "religion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "religion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "religion_formatted",
    "name": "Religion formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "religion"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "religion"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "religion"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "religion_color",
    "name": "Religion number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "religion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "religion_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "religion_label_color",
    "name": "Religion label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "religion_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "sleight_of_hand_proficiency",
    "name": "Sleight of Hand proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "sleight_of_hand",
    "name": "Sleight of Hand",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "dexterity_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "sleight_of_hand_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "sleight_of_hand_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "sleight_of_hand_formatted",
    "name": "Sleight of Hand formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "sleight_of_hand"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "sleight_of_hand"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "sleight_of_hand"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "sleight_of_hand_color",
    "name": "Sleight of Hand number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "sleight_of_hand_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "sleight_of_hand_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "sleight_of_hand_label_color",
    "name": "Sleight of Hand label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "sleight_of_hand_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "stealth_proficiency",
    "name": "Stealth proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "stealth",
    "name": "Stealth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "dexterity_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "stealth_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "stealth_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "stealth_formatted",
    "name": "Stealth formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "stealth"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "stealth"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "stealth"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "stealth_color",
    "name": "Stealth number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "stealth_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "stealth_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "stealth_label_color",
    "name": "Stealth label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "stealth_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "survival_proficiency",
    "name": "Survival proficiency (none, proficient, expert)",
    "type": "base",
    "value_type": "string",
    "default_value": "none"
  },
  {
    "id": "survival",
    "name": "Survival",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "wisdom_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "survival_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "survival_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      },
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "stat",
                  "stat": "has_jack_of_all_trades"
                },
                "components": {
                  "type": "divide",
                  "rounding_method": "down",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "proficiency_bonus"
                      },
                      {
                        "type": "constant",
                        "value": 2,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "survival_formatted",
    "name": "Survival formatted",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThan",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "survival"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "survival"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "survival"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "survival_color",
    "name": "Survival number color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "survival_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "proficient",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "survival_proficiency"
                      },
                      {
                        "type": "constant",
                        "value": "expert",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "text",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "survival_label_color",
    "name": "Survival label color",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "survival_proficiency"
                },
                {
                  "type": "constant",
                  "value": "expert",
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "hint",
            "value_type": "string"
          }
        }
      ]
    }
  },
  {
    "id": "sort_skills_by_name",
    "name": "Should sort skills by name",
    "type": "base",
    "value_type": "bool",
    "default_value": true
  },
  {
    "id": "equipped_armor_id",
    "name": "Equipped armor ID",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "equipped_shield_id",
    "name": "Equipped shield ID",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "speed",
    "name": "Speed",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "race.current_speed"
          },
          {
            "type": "stat",
            "stat": "worn_armor_speed_modifier"
          }
        ]
      }
    }
  },
  {
    "id": "burrow_speed",
    "name": "Burrow speed",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "race.current_burrow_speed"
          },
          {
            "type": "stat",
            "stat": "worn_armor_speed_modifier"
          }
        ]
      }
    }
  },
  {
    "id": "climb_speed",
    "name": "Climb speed",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "race.current_climb_speed"
          },
          {
            "type": "stat",
            "stat": "worn_armor_speed_modifier"
          }
        ]
      }
    }
  },
  {
    "id": "fly_speed",
    "name": "Fly speed",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "race.current_fly_speed"
          },
          {
            "type": "stat",
            "stat": "worn_armor_speed_modifier"
          }
        ]
      }
    }
  },
  {
    "id": "swim_speed",
    "name": "Swim speed",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "race.current_swim_speed"
          },
          {
            "type": "stat",
            "stat": "worn_armor_speed_modifier"
          }
        ]
      }
    }
  },
  {
    "id": "worn_armor_speed_modifier",
    "name": "Worn armor speed modifier (penalty)",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "notEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "equipped_armor"
                },
                {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              ]
            }
          },
          "components": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "greaterThanEquals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "strength_score"
                      },
                      {
                        "type": "stat",
                        "stat": "equipped_armor.required_strength"
                      }
                    ]
                  }
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              }
            ]
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 0,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "level",
    "name": "Level",
    "abbreviation": "Lvl.",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class_level"
        }
      }
    }
  },
  {
    "id": "armor_class",
    "name": "Armor Class",
    "abbreviation": "AC",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "max",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "equipped_armor_ac"
                },
                {
                  "type": "stat",
                  "stat": "classes_ac"
                },
                {
                  "type": "stat",
                  "stat": "race_ac"
                }
              ]
            }
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "contains",
                  "haystack": {
                    "type": "map",
                    "components": {
                      "type": "stat",
                      "stat": "armors"
                    },
                    "mapper": {
                      "type": "stat",
                      "stat": "$mapValue.id"
                    }
                  },
                  "needle": {
                    "type": "stat",
                    "stat": "equipped_shield_id"
                  }
                },
                "components": {
                  "type": "when",
                  "clauses": [
                    {
                      "condition": {
                        "type": "defaultIfNull",
                        "components": {
                          "type": "stat",
                          "stat": "equipped_shield?.is_proficient?"
                        },
                        "default_components": {
                          "type": "constant",
                          "value": false,
                          "value_type": "bool"
                        }
                      },
                      "components": {
                        "type": "defaultIfNull",
                        "components": {
                          "type": "stat",
                          "stat": "equipped_shield?.base_ac?"
                        },
                        "default_components": {
                          "type": "constant",
                          "value": 0,
                          "value_type": "integer"
                        }
                      }
                    },
                    {
                      "condition": {
                        "type": "constant",
                        "value": true,
                        "value_type": "bool"
                      },
                      "components": {
                        "type": "constant",
                        "value": 0,
                        "value_type": "integer"
                      }
                    }
                  ]
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "race_ac",
    "name": "Race AC",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "race.actual_base_ac"
          },
          {
            "type": "add",
            "components": {
              "type": "map",
              "components": {
                "type": "stat",
                "stat": "race.actual_ac_modifiers"
              },
              "mapper": {
                "type": "metaStat",
                "meta_stat": {
                  "type": "concat",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "$mapValue"
                      },
                      {
                        "type": "constant",
                        "value": "_modifier",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              }
            }
          }
        ]
      }
    }
  },
  {
    "id": "classes_ac",
    "name": "Classes AC",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "max",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "add",
          "components": {
            "type": "list",
            "components": [
              {
                "type": "stat",
                "stat": "$class.class.actual_base_ac"
              },
              {
                "type": "add",
                "components": {
                  "type": "map",
                  "components": {
                    "type": "stat",
                    "stat": "$class.class.actual_ac_modifiers"
                  },
                  "mapper": {
                    "type": "metaStat",
                    "meta_stat": {
                      "type": "concat",
                      "components": {
                        "type": "list",
                        "components": [
                          {
                            "type": "stat",
                            "stat": "$mapValue"
                          },
                          {
                            "type": "constant",
                            "value": "_modifier",
                            "value_type": "string"
                          }
                        ]
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  },
  {
    "id": "equipped_armor_ac",
    "name": "Equipped armor AC",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "contains",
            "haystack": {
              "type": "map",
              "components": {
                "type": "stat",
                "stat": "armors"
              },
              "mapper": {
                "type": "stat",
                "stat": "$mapValue.id"
              }
            },
            "needle": {
              "type": "stat",
              "stat": "equipped_armor_id"
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "base_ac",
                  "for_resource": {
                    "type": "stat",
                    "stat": "equipped_armor"
                  }
                },
                {
                  "type": "min",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "when",
                        "clauses": [
                          {
                            "condition": {
                              "type": "notEquals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "constant",
                                    "value": "none",
                                    "value_type": "string"
                                  },
                                  {
                                    "type": "stat",
                                    "stat": "modifier",
                                    "for_resource": {
                                      "type": "stat",
                                      "stat": "equipped_armor"
                                    }
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "metaStat",
                              "meta_stat": {
                                "type": "concat",
                                "components": {
                                  "type": "list",
                                  "components": [
                                    {
                                      "type": "stat",
                                      "stat": "modifier",
                                      "for_resource": {
                                        "type": "stat",
                                        "stat": "equipped_armor"
                                      }
                                    },
                                    {
                                      "type": "constant",
                                      "value": "_modifier",
                                      "value_type": "string"
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          {
                            "condition": {
                              "type": "constant",
                              "value": true,
                              "value_type": "bool"
                            },
                            "components": {
                              "type": "constant",
                              "value": 0,
                              "value_type": "integer"
                            }
                          }
                        ]
                      },
                      {
                        "type": "when",
                        "clauses": [
                          {
                            "condition": {
                              "type": "stat",
                              "stat": "has_max_bonus",
                              "for_resource": {
                                "type": "stat",
                                "stat": "equipped_armor"
                              }
                            },
                            "components": {
                              "type": "stat",
                              "stat": "max_bonus",
                              "for_resource": {
                                "type": "stat",
                                "stat": "equipped_armor"
                              }
                            }
                          },
                          {
                            "condition": {
                              "type": "constant",
                              "value": true,
                              "value_type": "bool"
                            },
                            "components": {
                              "type": "constant",
                              "value": 10000,
                              "value_type": "integer"
                            }
                          }
                        ]
                      }
                    ]
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 0,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "equipped_armor",
    "name": "Equipped armor",
    "type": "calculated",
    "value_type": "resource",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "stat",
        "stat": "armors"
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$findFirstValue.id"
            },
            {
              "type": "stat",
              "stat": "equipped_armor_id"
            }
          ]
        }
      }
    }
  },
  {
    "id": "equipped_shield",
    "name": "Equipped shield",
    "type": "calculated",
    "value_type": "resource",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "stat",
        "stat": "armors"
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$findFirstValue.id"
            },
            {
              "type": "stat",
              "stat": "equipped_shield_id"
            }
          ]
        }
      }
    }
  },
  {
    "id": "passive_perception",
    "name": "Passive perception",
    "abbreviation": "PP",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "constant",
            "value": 10,
            "value_type": "integer"
          },
          {
            "type": "stat",
            "stat": "perception"
          }
        ]
      }
    }
  },
  {
    "id": "initiative",
    "name": "Initiative",
    "abbreviation": "Ini.",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "stat",
      "stat": "dexterity_modifier"
    }
  },
  {
    "id": "proficiency_bonus",
    "name": "Proficiency Bonus",
    "abbreviation": "PB",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "constant",
            "value": 1,
            "value_type": "integer"
          },
          {
            "type": "divide",
            "rounding_method": "up",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "level"
                },
                {
                  "type": "constant",
                  "value": 4,
                  "value_type": "integer"
                }
              ]
            }
          }
        ]
      }
    }
  },
  {
    "id": "display_proficiency_bonus",
    "name": "Display proficiency bonus",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "greaterThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                },
                {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "+",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "strength_score",
    "name": "Strength",
    "abbreviation": "STR",
    "type": "base",
    "value_type": "integer",
    "default_value": 8
  },
  {
    "id": "dexterity_score",
    "name": "Dexterity",
    "abbreviation": "DEX",
    "type": "base",
    "value_type": "integer",
    "default_value": 8
  },
  {
    "id": "constitution_score",
    "name": "Constitution",
    "abbreviation": "CON",
    "type": "base",
    "value_type": "integer",
    "default_value": 8
  },
  {
    "id": "intelligence_score",
    "name": "Intelligence",
    "abbreviation": "INT",
    "type": "base",
    "value_type": "integer",
    "default_value": 8
  },
  {
    "id": "wisdom_score",
    "name": "Wisdom",
    "abbreviation": "WIS",
    "type": "base",
    "value_type": "integer",
    "default_value": 8
  },
  {
    "id": "charisma_score",
    "name": "Charisma",
    "abbreviation": "CHA",
    "type": "base",
    "value_type": "integer",
    "default_value": 8
  },
  {
    "id": "strength_modifier",
    "name": "Strength",
    "abbreviation": "STR",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "divide",
      "rounding_method": "down",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "strength_score"
                },
                {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "constant",
            "value": 2,
            "value_type": "integer"
          }
        ]
      }
    }
  },
  {
    "id": "dexterity_modifier",
    "name": "Dexterity",
    "abbreviation": "DEX",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "divide",
      "rounding_method": "down",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "dexterity_score"
                },
                {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "constant",
            "value": 2,
            "value_type": "integer"
          }
        ]
      }
    }
  },
  {
    "id": "constitution_modifier",
    "name": "Constitution",
    "abbreviation": "CON",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "divide",
      "rounding_method": "down",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "constitution_score"
                },
                {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "constant",
            "value": 2,
            "value_type": "integer"
          }
        ]
      }
    }
  },
  {
    "id": "intelligence_modifier",
    "name": "Intelligence",
    "abbreviation": "INT",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "divide",
      "rounding_method": "down",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "intelligence_score"
                },
                {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "constant",
            "value": 2,
            "value_type": "integer"
          }
        ]
      }
    }
  },
  {
    "id": "wisdom_modifier",
    "name": "Wisdom",
    "abbreviation": "WIS",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "divide",
      "rounding_method": "down",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "wisdom_score"
                },
                {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "constant",
            "value": 2,
            "value_type": "integer"
          }
        ]
      }
    }
  },
  {
    "id": "charisma_modifier",
    "name": "Charisma",
    "abbreviation": "CHA",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "divide",
      "rounding_method": "down",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "charisma_score"
                },
                {
                  "type": "constant",
                  "value": -10,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "constant",
            "value": 2,
            "value_type": "integer"
          }
        ]
      }
    }
  },
  {
    "id": "attacks_per_action",
    "name": "Attacks per action",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "max",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.attacks_per_action"
        }
      }
    }
  },
  {
    "id": "all_weapons",
    "name": "All weapons (including racial and class weapons)",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "weapon",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.weapons"
        },
        {
          "type": "flatMap",
          "map_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "defaultIfNull",
            "components": {
              "type": "stat",
              "stat": "$class.class.weapons"
            },
            "default_components": {
              "type": "list",
              "components": []
            }
          }
        },
        {
          "type": "stat",
          "stat": "weapons"
        }
      ]
    }
  },
  {
    "id": "weapons",
    "name": "Weapons",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "weapon",
    "default_value": []
  },
  {
    "id": "armors",
    "name": "Armors",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "armor",
    "default_value": []
  },
  {
    "id": "equipment",
    "name": "Equipment",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "item",
    "default_value": []
  },
  {
    "id": "sorted_spells",
    "name": "Sorted spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "sortBy",
      "components": {
        "type": "flatAppend",
        "treat_as_set": true,
        "components": [
          {
            "type": "map",
            "components": {
              "type": "filter",
              "components": {
                "type": "flatAppend",
                "components": [
                  {
                    "type": "stat",
                    "stat": "race.spells"
                  },
                  {
                    "type": "defaultIfNull",
                    "components": {
                      "type": "stat",
                      "stat": "race.selected_subrace?.spells"
                    },
                    "default_components": {
                      "type": "list",
                      "components": []
                    }
                  }
                ]
              },
              "filter": {
                "type": "lessThanEquals",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$filterValue.level"
                    },
                    {
                      "type": "stat",
                      "stat": "level"
                    }
                  ]
                }
              }
            },
            "mapper": {
              "type": "stat",
              "stat": "$mapValue.spell"
            }
          },
          {
            "type": "stat",
            "stat": "spells"
          }
        ]
      },
      "sort_by_selector": {
        "type": "stat",
        "stat": "$sortByValue.name"
      }
    }
  },
  {
    "id": "cantrips",
    "name": "Cantrips",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "filter",
      "components": {
        "type": "stat",
        "stat": "sorted_spells"
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "constant",
              "value": "spell_level_0",
              "value_type": "string"
            },
            {
              "type": "stat",
              "stat": "$filterValue.level"
            }
          ]
        }
      }
    }
  },
  {
    "id": "level_1_spells",
    "name": "Level 1 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_1",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_1",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_2_spells",
    "name": "Level 2 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_2",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_2",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_3_spells",
    "name": "Level 3 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_3",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_3",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_4_spells",
    "name": "Level 4 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_4",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_4",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_5_spells",
    "name": "Level 5 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_5",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_5",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_6_spells",
    "name": "Level 6 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_6",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_6",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_7_spells",
    "name": "Level 7 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_7",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_7",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_8_spells",
    "name": "Level 8 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_8",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_8",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "level_9_spells",
    "name": "Level 9 spells",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_9",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "stat",
                  "stat": "$filterValue.prepared"
                }
              ]
            }
          }
        },
        {
          "type": "filter",
          "components": {
            "type": "stat",
            "stat": "sorted_spells"
          },
          "filter": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": "spell_level_9",
                        "value_type": "string"
                      },
                      {
                        "type": "stat",
                        "stat": "$filterValue.level"
                      }
                    ]
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "$filterValue.prepared"
                  }
                }
              ]
            }
          }
        }
      ]
    }
  },
  {
    "id": "spells",
    "name": "Spells",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "spell",
    "default_value": []
  },
  {
    "id": "max_spell_slots_1_bonus",
    "name": "Max lvl 1 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_2_bonus",
    "name": "Max lvl 2 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_3_bonus",
    "name": "Max lvl 3 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_4_bonus",
    "name": "Max lvl 4 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_5_bonus",
    "name": "Max lvl 5 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_6_bonus",
    "name": "Max lvl 6 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_7_bonus",
    "name": "Max lvl 7 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_8_bonus",
    "name": "Max lvl 8 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "max_spell_slots_9_bonus",
    "name": "Max lvl 9 slots bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_1",
    "name": "1st",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_2",
    "name": "2nd",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_3",
    "name": "3rd",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_4",
    "name": "4th",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_5",
    "name": "5th",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_6",
    "name": "6th",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_7",
    "name": "7th",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_8",
    "name": "8th",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_slots_9",
    "name": "9th",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "str_point_buy_point_worth",
    "name": "Strength point buy point worth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "lessThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_str?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                },
                {
                  "type": "constant",
                  "value": 13,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": -8,
                  "value_type": "string"
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_str?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$view.edit_character_basics_ability_scores_point_buy_str?"
                },
                {
                  "type": "constant",
                  "value": 14,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": 7,
            "value_type": "integer"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 9,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "dex_point_buy_point_worth",
    "name": "Dexterity point buy point worth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "lessThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_dex?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                },
                {
                  "type": "constant",
                  "value": 13,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": -8,
                  "value_type": "string"
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_dex?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$view.edit_character_basics_ability_scores_point_buy_dex?"
                },
                {
                  "type": "constant",
                  "value": 14,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": 7,
            "value_type": "integer"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 9,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "con_point_buy_point_worth",
    "name": "Constitution point buy point worth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "lessThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_con?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                },
                {
                  "type": "constant",
                  "value": 13,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": -8,
                  "value_type": "string"
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_con?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$view.edit_character_basics_ability_scores_point_buy_con?"
                },
                {
                  "type": "constant",
                  "value": 14,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": 7,
            "value_type": "integer"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 9,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "int_point_buy_point_worth",
    "name": "Intelligence point buy point worth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "lessThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_int?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                },
                {
                  "type": "constant",
                  "value": 13,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": -8,
                  "value_type": "string"
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_int?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$view.edit_character_basics_ability_scores_point_buy_int?"
                },
                {
                  "type": "constant",
                  "value": 14,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": 7,
            "value_type": "integer"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 9,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "wis_point_buy_point_worth",
    "name": "Wisdom point buy point worth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "lessThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_wis?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                },
                {
                  "type": "constant",
                  "value": 13,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": -8,
                  "value_type": "string"
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_wis?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$view.edit_character_basics_ability_scores_point_buy_wis?"
                },
                {
                  "type": "constant",
                  "value": 14,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": 7,
            "value_type": "integer"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 9,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "cha_point_buy_point_worth",
    "name": "Charisma point buy point worth",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "lessThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_cha?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                },
                {
                  "type": "constant",
                  "value": 13,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "add",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": -8,
                  "value_type": "string"
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "$view?.edit_character_basics_ability_scores_point_buy_cha?"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 8,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        },
        {
          "condition": {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "$view.edit_character_basics_ability_scores_point_buy_cha?"
                },
                {
                  "type": "constant",
                  "value": 14,
                  "value_type": "integer"
                }
              ]
            }
          },
          "components": {
            "type": "constant",
            "value": 7,
            "value_type": "integer"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": 9,
            "value_type": "integer"
          }
        }
      ]
    }
  },
  {
    "id": "remaining_point_buy_points",
    "name": "Remaining point buy points",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "subtract",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "constant",
            "value": 27,
            "value_type": "integer"
          },
          {
            "type": "stat",
            "stat": "str_point_buy_point_worth"
          },
          {
            "type": "stat",
            "stat": "dex_point_buy_point_worth"
          },
          {
            "type": "stat",
            "stat": "con_point_buy_point_worth"
          },
          {
            "type": "stat",
            "stat": "int_point_buy_point_worth"
          },
          {
            "type": "stat",
            "stat": "wis_point_buy_point_worth"
          },
          {
            "type": "stat",
            "stat": "cha_point_buy_point_worth"
          }
        ]
      }
    }
  },
  {
    "id": "creator_selected_subrace",
    "name": "Selected creator subrace",
    "type": "calculated",
    "value_type": "resource",
    "resource_type": "race",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "defaultIfNull",
        "components": {
          "type": "stat",
          "stat": "$view?.edit_character_basics_race_select?.subraces"
        },
        "default_components": {
          "type": "list",
          "components": []
        }
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$findFirstValue.id"
            },
            {
              "type": "stat",
              "stat": "$view?.edit_character_basics_subrace_select?"
            }
          ]
        }
      }
    }
  },
  {
    "id": "creator_ability_score_increases",
    "name": "Creator ability score increases",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "ability_score_increase",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "defaultIfNull",
          "components": {
            "type": "stat",
            "stat": "$view?.edit_character_basics_race_select?.ability_score_increases"
          },
          "default_components": {
            "type": "list",
            "components": []
          }
        },
        {
          "type": "defaultIfNull",
          "components": {
            "type": "stat",
            "stat": "creator_selected_subrace?.ability_score_increases"
          },
          "default_components": {
            "type": "list",
            "components": []
          }
        }
      ]
    }
  },
  {
    "id": "old_creator_ability_score_increases",
    "name": "Old creator ability score increases",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "ability_score_increase",
    "default_value": []
  },
  {
    "id": "ability_score_mode",
    "name": "Ability score mode",
    "type": "base",
    "value_type": "string",
    "default_value": "custom"
  },
  {
    "id": "creator_language_proficiency_choices",
    "name": "Creator language proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.language_proficiencies_for_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.language_proficiencies_for_current_level"
          }
        },
        {
          "type": "stat",
          "stat": "background.language_proficiencies_for_current_level"
        }
      ]
    }
  },
  {
    "id": "creator_skill_proficiency_choices",
    "name": "Creator skill proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.skill_proficiencies_for_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.skill_proficiencies_for_current_level"
          }
        },
        {
          "type": "stat",
          "stat": "background.skill_proficiencies_for_current_level"
        }
      ]
    }
  },
  {
    "id": "creator_armor_proficiency_choices",
    "name": "Creator armor proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.armor_proficiencies_for_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.armor_proficiencies_for_current_level"
          }
        },
        {
          "type": "stat",
          "stat": "background.armor_proficiencies_for_current_level"
        }
      ]
    }
  },
  {
    "id": "creator_weapon_proficiency_choices",
    "name": "Creator weapon proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.weapon_proficiencies_for_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.weapon_proficiencies_for_current_level"
          }
        },
        {
          "type": "stat",
          "stat": "background.weapon_proficiencies_for_current_level"
        }
      ]
    }
  },
  {
    "id": "creator_tool_proficiency_choices",
    "name": "Creator tool proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.tool_proficiencies_for_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.tool_proficiencies_for_current_level"
          }
        },
        {
          "type": "stat",
          "stat": "background.tool_proficiencies_for_current_level"
        }
      ]
    }
  },
  {
    "id": "creator_starting_equipment_choices",
    "name": "Creator starting equipment choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "selectable_items",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.selectable_equipments"
          }
        },
        {
          "type": "stat",
          "stat": "background.selectable_equipments"
        }
      ]
    }
  },
  {
    "id": "creator_starting_armor_choices",
    "name": "Creator starting armor choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "selectable_armors",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.selectable_armors"
          }
        },
        {
          "type": "stat",
          "stat": "background.selectable_armors"
        }
      ]
    }
  },
  {
    "id": "creator_starting_weapon_choices",
    "name": "Creator starting weapon choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "selectable_weapons",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.selectable_weapons"
          }
        },
        {
          "type": "stat",
          "stat": "background.selectable_weapons"
        }
      ]
    }
  },
  {
    "id": "spell_attack_extra_bonus",
    "name": "Extra spell attack bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "spell_dc_extra_bonus",
    "name": "Extra spell save DC bonus",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "strength_saving_throw_proficiency",
    "name": "Strength",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class.has_strength_saving_throw_proficiency"
        }
      },
      "filter": {
        "type": "constant",
        "value": true,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "strength_saving_throw",
    "name": "Strength",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "strength_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "strength_saving_throw_proficiency"
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "dexterity_saving_throw_proficiency",
    "name": "Dexterity",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class.has_dexterity_saving_throw_proficiency"
        }
      },
      "filter": {
        "type": "constant",
        "value": true,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "dexterity_saving_throw",
    "name": "Dexterity",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "dexterity_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "dexterity_saving_throw_proficiency"
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "constitution_saving_throw_proficiency",
    "name": "Constitution",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class.has_constitution_saving_throw_proficiency"
        }
      },
      "filter": {
        "type": "constant",
        "value": true,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "constitution_saving_throw",
    "name": "Constitution",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "constitution_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "constitution_saving_throw_proficiency"
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "intelligence_saving_throw_proficiency",
    "name": "Intelligence",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class.has_intelligence_saving_throw_proficiency"
        }
      },
      "filter": {
        "type": "constant",
        "value": true,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "intelligence_saving_throw",
    "name": "Intelligence",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "intelligence_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "intelligence_saving_throw_proficiency"
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "wisdom_saving_throw_proficiency",
    "name": "Wisdom",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class.has_wisdom_saving_throw_proficiency"
        }
      },
      "filter": {
        "type": "constant",
        "value": true,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "wisdom_saving_throw",
    "name": "Wisdom",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "wisdom_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "wisdom_saving_throw_proficiency"
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "charisma_saving_throw_proficiency",
    "name": "Charisma",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "stat",
          "stat": "$class.class.has_charisma_saving_throw_proficiency"
        }
      },
      "filter": {
        "type": "constant",
        "value": true,
        "value_type": "bool"
      }
    }
  },
  {
    "id": "charisma_saving_throw",
    "name": "Charisma",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "charisma_modifier"
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "charisma_saving_throw_proficiency"
                },
                "components": {
                  "type": "stat",
                  "stat": "proficiency_bonus"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": 0,
                  "value_type": "integer"
                }
              }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "class_hit_dice_formatted",
    "name": "Class hit dice (formatted e.g: 1d10)",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "string",
    "components": {
      "type": "map",
      "map_value_key": "$class",
      "components": {
        "type": "stat",
        "stat": "classes"
      },
      "mapper": {
        "type": "concat",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$class.class_level"
            },
            {
              "type": "stat",
              "stat": "$class.class.actual_hit_die"
            }
          ]
        }
      }
    }
  },
  {
    "id": "selected_selectable_feature_ids",
    "name": "Selected selectable feature ids",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "string",
    "default_value": []
  },
  {
    "id": "race_traits",
    "name": "Race traits",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "components": {
      "type": "sortBy",
      "components": {
        "type": "stat",
        "stat": "race.current_level_traits"
      },
      "sort_by_selector": {
        "type": "stat",
        "stat": "$sortByValue.min_level"
      }
    }
  },
  {
    "id": "background_features",
    "name": "Background features",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "components": {
      "type": "sortBy",
      "components": {
        "type": "stat",
        "stat": "background.current_level_features"
      },
      "sort_by_selector": {
        "type": "stat",
        "stat": "$sortByValue.min_level"
      }
    }
  },
  {
    "id": "feats",
    "name": "Feats",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "default_value": []
  },
  {
    "id": "blinded",
    "name": "Blinded",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "charmed",
    "name": "Charmed",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "deafened",
    "name": "Deafened",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "frightened",
    "name": "Frightened",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "grappled",
    "name": "Grappled",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "incapacitated",
    "name": "Incapacitated",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "invisible",
    "name": "Invisible",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "paralyzed",
    "name": "Paralyzed",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "petrified",
    "name": "Petrified",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "poisoned",
    "name": "Poisoned",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "prone",
    "name": "Prone",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "restrained",
    "name": "Restrained",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "stunned",
    "name": "Stunned",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "unconscious",
    "name": "Unconscious",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "exhausted",
    "name": "Exhausted",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "temp_short_rest_hit_dice_d4",
    "name": "d4",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "temp_short_rest_hit_dice_d6",
    "name": "d6",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "temp_short_rest_hit_dice_d8",
    "name": "d8",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "temp_short_rest_hit_dice_d10",
    "name": "d10",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "temp_short_rest_hit_dice_d12",
    "name": "d12",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "temp_short_rest_hit_dice_d20",
    "name": "d20",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "is_single_half_level_caster",
    "name": "Is single half level caster",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "and",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "length",
                  "components": {
                    "type": "stat",
                    "stat": "classes"
                  }
                },
                {
                  "type": "constant",
                  "value": 1,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "findFirst",
            "components": {
              "type": "map",
              "map_value_key": "$class",
              "components": {
                "type": "stat",
                "stat": "classes"
              },
              "mapper": {
                "type": "equals",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class.actual_effective_caster_level"
                    },
                    {
                      "type": "constant",
                      "value": "half",
                      "value_type": "string"
                    }
                  ]
                }
              }
            },
            "filter": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            }
          }
        ]
      }
    }
  },
  {
    "id": "first_half_level_caster_class",
    "name": "First half level caster class",
    "type": "calculated",
    "value_type": "resource",
    "resource_type": "class_details",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "stat",
            "stat": "is_single_half_level_caster"
          },
          "components": {
            "type": "findFirst",
            "components": {
              "type": "stat",
              "stat": "classes"
            },
            "filter": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": null,
            "value_type": "resource"
          }
        }
      ]
    }
  },
  {
    "id": "is_single_third_level_caster",
    "name": "Is single third level caster",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "and",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "length",
                  "components": {
                    "type": "stat",
                    "stat": "classes"
                  }
                },
                {
                  "type": "constant",
                  "value": 1,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "findFirst",
            "components": {
              "type": "map",
              "map_value_key": "$class",
              "components": {
                "type": "stat",
                "stat": "classes"
              },
              "mapper": {
                "type": "equals",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class.actual_effective_caster_level"
                    },
                    {
                      "type": "constant",
                      "value": "third",
                      "value_type": "string"
                    }
                  ]
                }
              }
            },
            "filter": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            }
          }
        ]
      }
    }
  },
  {
    "id": "first_third_level_caster_class",
    "name": "First third level caster class",
    "type": "calculated",
    "value_type": "resource",
    "resource_type": "class_details",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "stat",
            "stat": "is_single_third_level_caster"
          },
          "components": {
            "type": "findFirst",
            "components": {
              "type": "stat",
              "stat": "classes"
            },
            "filter": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            }
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": null,
            "value_type": "resource"
          }
        }
      ]
    }
  },
  {
    "id": "spellcaster_level",
    "name": "Spellcaster level",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "map",
        "map_value_key": "$class",
        "components": {
          "type": "stat",
          "stat": "classes"
        },
        "mapper": {
          "type": "when",
          "clauses": [
            {
              "condition": {
                "type": "equals",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class.actual_effective_caster_level"
                    },
                    {
                      "type": "constant",
                      "value": "full",
                      "value_type": "string"
                    }
                  ]
                }
              },
              "components": {
                "type": "stat",
                "stat": "$class.class_level"
              }
            },
            {
              "condition": {
                "type": "equals",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class.actual_effective_caster_level"
                    },
                    {
                      "type": "constant",
                      "value": "half",
                      "value_type": "string"
                    }
                  ]
                }
              },
              "components": {
                "type": "divide",
                "rounding_method": "down",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class_level"
                    },
                    {
                      "type": "constant",
                      "value": 2,
                      "value_type": "integer"
                    }
                  ]
                }
              }
            },
            {
              "condition": {
                "type": "equals",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class.actual_effective_caster_level"
                    },
                    {
                      "type": "constant",
                      "value": "third",
                      "value_type": "string"
                    }
                  ]
                }
              },
              "components": {
                "type": "divide",
                "rounding_method": "down",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "stat",
                      "stat": "$class.class_level"
                    },
                    {
                      "type": "constant",
                      "value": 3,
                      "value_type": "integer"
                    }
                  ]
                }
              }
            },
            {
              "condition": {
                "type": "constant",
                "value": true,
                "value_type": "bool"
              },
              "components": {
                "type": "constant",
                "value": 0,
                "value_type": "integer"
              }
            }
          ]
        }
      }
    }
  },
  {
    "id": "custom_spell_slot_classes",
    "name": "Custom spell slot classes",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "class_details",
    "components": {
      "type": "filter",
      "filter_value_key": "$class",
      "components": {
        "type": "stat",
        "stat": "classes"
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$class.class.actual_effective_caster_level"
            },
            {
              "type": "constant",
              "value": "custom",
              "value_type": "string"
            }
          ]
        }
      }
    }
  },
  {
    "id": "copper_pieces",
    "name": "CP",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "silver_pieces",
    "name": "SP",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "electrum_pieces",
    "name": "EP",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "gold_pieces",
    "name": "GP",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "platinum_pieces",
    "name": "PP",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "death_saving_throws_success_1",
    "name": "Death saving throw success 1",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "death_saving_throws_success_2",
    "name": "Death saving throw success 2",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "death_saving_throws_success_3",
    "name": "Death saving throw success 3",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "death_saving_throws_failure_1",
    "name": "Death saving throw failure 1",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "death_saving_throws_failure_2",
    "name": "Death saving throw failure 2",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "death_saving_throws_failure_3",
    "name": "Death saving throw failure 3",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "level_up_selected_class_details",
    "name": "Selected existing class when levelling up",
    "type": "calculated",
    "value_type": "resource",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "stat",
        "stat": "classes"
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$findFirstValue.class.id"
            },
            {
              "type": "stat",
              "stat": "$view?.level_up_select_class?"
            }
          ]
        }
      }
    }
  },
  {
    "id": "level_up_available_archetypes",
    "name": "Available archetypes for level up",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "class",
    "components": {
      "type": "defaultIfNull",
      "components": {
        "type": "stat",
        "stat": "level_up_selected_class_details?.class.archetypes?"
      },
      "default_components": {
        "type": "list",
        "components": []
      }
    }
  },
  {
    "id": "level_up_has_to_select_archetype",
    "name": "Has to select an archetype when levelling up for the current selected class",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "and",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "not",
            "components": {
              "type": "isEmpty",
              "components": {
                "type": "stat",
                "stat": "level_up_available_archetypes"
              }
            }
          },
          {
            "type": "isNull",
            "components": {
              "type": "stat",
              "stat": "level_up_selected_class_details?.archetype_id"
            }
          },
          {
            "type": "greaterThanEquals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "add",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "defaultIfNull",
                        "components": {
                          "type": "stat",
                          "stat": "level_up_selected_class_details?.class_level"
                        },
                        "default_components": {
                          "type": "constant",
                          "value": 0,
                          "value_type": "integer"
                        }
                      },
                      {
                        "type": "constant",
                        "value": 1,
                        "value_type": "integer"
                      }
                    ]
                  }
                },
                {
                  "type": "defaultIfNull",
                  "components": {
                    "type": "stat",
                    "stat": "level_up_selected_class_details?.class.archetype_selection_level"
                  },
                  "default_components": {
                    "type": "constant",
                    "value": 0,
                    "value_type": "integer"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  },
  {
    "id": "temp_level_up_class",
    "name": "Temporary variable for selecting among existing classes",
    "type": "base",
    "value_type": "string",
    "default_value": null
  },
  {
    "id": "temp_level_up_archetype",
    "name": "Temporary variable for selecting an archetype for an existing class",
    "type": "base",
    "value_type": "string",
    "default_value": null
  },
  {
    "id": "temp_level_up_multiclass",
    "name": "Temporary variable for selecting to multiclass",
    "type": "base",
    "value_type": "bool",
    "default_value": null
  },
  {
    "id": "temp_level_up_new_class",
    "name": "Temporary variable for levelling up into a new class",
    "type": "base",
    "value_type": "resource",
    "resource_type": "class_details",
    "default_value": null
  },
  {
    "id": "level_up_language_proficiency_choices",
    "name": "Level up language proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.language_proficiencies_choices_in_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "$mapValue.should_select_on_level_up"
                },
                "components": {
                  "type": "stat",
                  "stat": "$mapValue.class.language_proficiencies_choices_in_current_level"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          }
        },
        {
          "type": "stat",
          "stat": "background.language_proficiencies_choices_in_current_level"
        }
      ]
    }
  },
  {
    "id": "level_up_skill_proficiency_choices",
    "name": "Level up skill proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.skill_proficiencies_choices_in_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "$mapValue.should_select_on_level_up"
                },
                "components": {
                  "type": "stat",
                  "stat": "$mapValue.class.skill_proficiencies_choices_in_current_level"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          }
        },
        {
          "type": "stat",
          "stat": "background.skill_proficiencies_choices_in_current_level"
        }
      ]
    }
  },
  {
    "id": "level_up_armor_proficiency_choices",
    "name": "Level up armor proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.armor_proficiencies_choices_in_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "$mapValue.should_select_on_level_up"
                },
                "components": {
                  "type": "stat",
                  "stat": "$mapValue.class.armor_proficiencies_choices_in_current_level"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          }
        },
        {
          "type": "stat",
          "stat": "background.armor_proficiencies_choices_in_current_level"
        }
      ]
    }
  },
  {
    "id": "level_up_weapon_proficiency_choices",
    "name": "Level up weapon proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.weapon_proficiencies_choices_in_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "$mapValue.should_select_on_level_up"
                },
                "components": {
                  "type": "stat",
                  "stat": "$mapValue.class.weapon_proficiencies_choices_in_current_level"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          }
        },
        {
          "type": "stat",
          "stat": "background.weapon_proficiencies_choices_in_current_level"
        }
      ]
    }
  },
  {
    "id": "level_up_tool_proficiency_choices",
    "name": "Level up tool proficiency choices",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "levelled_choice_text",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.tool_proficiencies_choices_in_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "$mapValue.should_select_on_level_up"
                },
                "components": {
                  "type": "stat",
                  "stat": "$mapValue.class.tool_proficiencies_choices_in_current_level"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          }
        },
        {
          "type": "stat",
          "stat": "background.tool_proficiencies_choices_in_current_level"
        }
      ]
    }
  },
  {
    "id": "temp_last_level_up_class_id",
    "name": "Last level up class ID",
    "type": "base",
    "value_type": "string",
    "default_value": null
  },
  {
    "id": "last_level_up_class_details",
    "name": "Last level up class",
    "type": "calculated",
    "value_type": "resource",
    "components": {
      "type": "findFirst",
      "components": {
        "type": "stat",
        "stat": "classes"
      },
      "filter": {
        "type": "equals",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$findFirstValue.class.id"
            },
            {
              "type": "stat",
              "stat": "temp_last_level_up_class_id"
            }
          ]
        }
      }
    }
  },
  {
    "id": "should_show_asi",
    "name": "Should show ASI",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "or",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "last_level_up_class_details?.class_level"
                },
                {
                  "type": "constant",
                  "value": 4,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "last_level_up_class_details?.class_level"
                },
                {
                  "type": "constant",
                  "value": 8,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "last_level_up_class_details?.class_level"
                },
                {
                  "type": "constant",
                  "value": 12,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "last_level_up_class_details?.class_level"
                },
                {
                  "type": "constant",
                  "value": 16,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "equals",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "stat",
                  "stat": "last_level_up_class_details?.class_level"
                },
                {
                  "type": "constant",
                  "value": 19,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "contains",
                  "haystack": {
                    "type": "toLowerCase",
                    "components": {
                      "type": "defaultIfNull",
                      "components": {
                        "type": "stat",
                        "stat": "last_level_up_class_details?.class.name"
                      },
                      "default_components": {
                        "type": "constant",
                        "value": "",
                        "value_type": "string"
                      }
                    }
                  },
                  "needle": {
                    "type": "constant",
                    "value": "rogue",
                    "value_type": "string"
                  }
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "last_level_up_class_details?.class_level"
                      },
                      {
                        "type": "constant",
                        "value": 10,
                        "value_type": "integer"
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "contains",
                  "haystack": {
                    "type": "toLowerCase",
                    "components": {
                      "type": "defaultIfNull",
                      "components": {
                        "type": "stat",
                        "stat": "last_level_up_class_details?.class.name"
                      },
                      "default_components": {
                        "type": "constant",
                        "value": "",
                        "value_type": "string"
                      }
                    }
                  },
                  "needle": {
                    "type": "constant",
                    "value": "fighter",
                    "value_type": "string"
                  }
                },
                {
                  "type": "or",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "equals",
                        "components": {
                          "type": "list",
                          "components": [
                            {
                              "type": "stat",
                              "stat": "last_level_up_class_details?.class_level"
                            },
                            {
                              "type": "constant",
                              "value": 6,
                              "value_type": "integer"
                            }
                          ]
                        }
                      },
                      {
                        "type": "equals",
                        "components": {
                          "type": "list",
                          "components": [
                            {
                              "type": "stat",
                              "stat": "last_level_up_class_details?.class_level"
                            },
                            {
                              "type": "constant",
                              "value": 14,
                              "value_type": "integer"
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    }
  },
  {
    "id": "temp_asi_selection_1",
    "name": "Temp ASI selection",
    "type": "base",
    "value_type": "string",
    "default_value": null
  },
  {
    "id": "temp_asi_selection_2",
    "name": "Temp ASI selection",
    "type": "base",
    "value_type": "string",
    "default_value": null
  },
  {
    "id": "temp_asi_choose_feat",
    "name": "Temp choose feat",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "temp_asi_feat_selection",
    "name": "Temp feat selection",
    "type": "base",
    "value_type": "resource",
    "resource_type": "feat",
    "default_value": null
  },
  {
    "id": "features_with_new_descriptions_in_new_level",
    "name": "Features with new descriptions in new level",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "race.traits_with_updates_in_current_level"
        },
        {
          "type": "flatMap",
          "components": {
            "type": "filter",
            "components": {
              "type": "stat",
              "stat": "classes"
            },
            "filter": {
              "type": "equals",
              "components": {
                "type": "list",
                "components": [
                  {
                    "type": "stat",
                    "stat": "last_level_up_class_details?.class.id"
                  },
                  {
                    "type": "stat",
                    "stat": "$filterValue.class.id"
                  }
                ]
              }
            }
          },
          "mapper": {
            "type": "stat",
            "stat": "$mapValue.class.features_with_updates_in_current_level"
          }
        },
        {
          "type": "stat",
          "stat": "background.features_with_updates_in_current_level"
        }
      ]
    }
  },
  {
    "id": "currently_levelling_up",
    "name": "Currently levelling up",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "selectable_features_with_new_amounts_in_new_level",
    "name": "Selectable features with new amounts in the new level",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "components": {
      "type": "filter",
      "components": {
        "type": "flatAppend",
        "components": [
          {
            "type": "stat",
            "stat": "race.current_level_traits"
          },
          {
            "type": "defaultIfNull",
            "components": {
              "type": "stat",
              "stat": "last_level_up_class_details?.class.current_level_features"
            },
            "default_components": {
              "type": "list",
              "components": []
            }
          },
          {
            "type": "stat",
            "stat": "background.current_level_features"
          }
        ]
      },
      "filter": {
        "type": "stat",
        "stat": "$filterValue.can_choose_new_selectable_features_in_current_level"
      }
    }
  },
  {
    "id": "hair_color",
    "name": "Hair color",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "eye_color",
    "name": "Eye color",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "outfit",
    "name": "Outfit",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "appearance_weapon",
    "name": "Appearance weapon",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "sex",
    "name": "Sex",
    "type": "base",
    "value_type": "string",
    "default_value": ""
  },
  {
    "id": "photo_prompt",
    "name": "Photo prompt",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "joinToString",
      "separator": ",",
      "components": {
        "type": "flatAppend",
        "components": [
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "race.actual_hair_color_selectable"
                },
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "concat",
                      "components": {
                        "type": "list",
                        "components": [
                          {
                            "type": "constant",
                            "value": "(",
                            "value_type": "string"
                          },
                          {
                            "type": "stat",
                            "stat": "hair_color"
                          },
                          {
                            "type": "constant",
                            "value": ":1.6)",
                            "value_type": "string"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "race.actual_eye_color_selectable"
                },
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "concat",
                      "components": {
                        "type": "list",
                        "components": [
                          {
                            "type": "constant",
                            "value": "(",
                            "value_type": "string"
                          },
                          {
                            "type": "stat",
                            "stat": "eye_color"
                          },
                          {
                            "type": "constant",
                            "value": ":1.3)",
                            "value_type": "string"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "race.actual_outfit_selectable"
                },
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "concat",
                      "components": {
                        "type": "list",
                        "components": [
                          {
                            "type": "constant",
                            "value": "(",
                            "value_type": "string"
                          },
                          {
                            "type": "stat",
                            "stat": "outfit"
                          },
                          {
                            "type": "constant",
                            "value": ":1.3)",
                            "value_type": "string"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "race.actual_appearance_weapon_selectable"
                },
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "concat",
                      "components": {
                        "type": "list",
                        "components": [
                          {
                            "type": "constant",
                            "value": "(",
                            "value_type": "string"
                          },
                          {
                            "type": "stat",
                            "stat": "appearance_weapon"
                          },
                          {
                            "type": "constant",
                            "value": ":1.6)",
                            "value_type": "string"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          },
          {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "race.actual_sex_selectable"
                },
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "concat",
                      "components": {
                        "type": "list",
                        "components": [
                          {
                            "type": "constant",
                            "value": "(",
                            "value_type": "string"
                          },
                          {
                            "type": "stat",
                            "stat": "sex"
                          },
                          {
                            "type": "constant",
                            "value": ":1.3)",
                            "value_type": "string"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "list",
                  "components": []
                }
              }
            ]
          },
          {
            "type": "map",
            "components": {
              "type": "stat",
              "stat": "race.actual_visual_traits"
            },
            "mapper": {
              "type": "concat",
              "components": {
                "type": "list",
                "components": [
                  {
                    "type": "constant",
                    "value": "(",
                    "value_type": "string"
                  },
                  {
                    "type": "stat",
                    "stat": "$mapValue.selected_option"
                  },
                  {
                    "type": "constant",
                    "value": ":1.",
                    "value_type": "string"
                  },
                  {
                    "type": "stat",
                    "stat": "$mapValue.importance"
                  },
                  {
                    "type": "constant",
                    "value": ")",
                    "value_type": "string"
                  }
                ]
              }
            }
          }
        ]
      }
    }
  },
  {
    "id": "attuned_armors",
    "name": "Attuned armors",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "mixed",
    "components": {
      "type": "filter",
      "components": {
        "type": "stat",
        "stat": "armors"
      },
      "filter": {
        "type": "and",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$filterValue.requires_attunement"
            },
            {
              "type": "stat",
              "stat": "$filterValue.is_attuned"
            }
          ]
        }
      }
    }
  },
  {
    "id": "attuned_weapons",
    "name": "Attuned weapons",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "mixed",
    "components": {
      "type": "filter",
      "components": {
        "type": "stat",
        "stat": "all_weapons"
      },
      "filter": {
        "type": "and",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$filterValue.requires_attunement"
            },
            {
              "type": "stat",
              "stat": "$filterValue.is_attuned"
            }
          ]
        }
      }
    }
  },
  {
    "id": "attuned_items",
    "name": "Attuned items",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "mixed",
    "components": {
      "type": "filter",
      "components": {
        "type": "stat",
        "stat": "equipment"
      },
      "filter": {
        "type": "and",
        "components": {
          "type": "list",
          "components": [
            {
              "type": "stat",
              "stat": "$filterValue.requires_attunement"
            },
            {
              "type": "stat",
              "stat": "$filterValue.is_attuned"
            }
          ]
        }
      }
    }
  },
  {
    "id": "attuned_resources",
    "name": "Attuned resources",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "mixed",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "stat",
          "stat": "attuned_armors"
        },
        {
          "type": "stat",
          "stat": "attuned_weapons"
        },
        {
          "type": "stat",
          "stat": "attuned_items"
        }
      ]
    }
  },
  {
    "id": "attuned_resources_count_message",
    "name": "Attuned resources count message",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "concat",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "constant",
            "value": "Attuned to ",
            "value_type": "string"
          },
          {
            "type": "length",
            "components": {
              "type": "stat",
              "stat": "attuned_resources"
            }
          },
          {
            "type": "constant",
            "value": " / 3 items",
            "value_type": "string"
          }
        ]
      }
    }
  },
  {
    "id": "selecting",
    "name": "Player is selecting things for this character",
    "type": "base",
    "value_type": "bool",
    "default_value": false
  },
  {
    "id": "should_show_controls_for_choices",
    "name": "Should show controls for choices (for race, background, etc choices like equipments or proficiencies)",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "or",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "stat",
            "stat": "selecting"
          },
          {
            "type": "stat",
            "stat": "currently_levelling_up"
          }
        ]
      }
    }
  },
  {
    "id": "all_features",
    "name": "All features",
    "type": "calculated",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "feat",
    "components": {
      "type": "flatAppend",
      "components": [
        {
          "type": "flatMap",
          "map_value_key": "$class",
          "components": {
            "type": "stat",
            "stat": "classes"
          },
          "mapper": {
            "type": "stat",
            "stat": "$class.features"
          }
        },
        {
          "type": "stat",
          "stat": "feats"
        },
        {
          "type": "stat",
          "stat": "race_traits"
        },
        {
          "type": "stat",
          "stat": "background_features"
        }
      ]
    }
  },
  {
    "id": "has_jack_of_all_trades",
    "name": "Has jack of all trades",
    "type": "calculated",
    "value_type": "bool",
    "components": {
      "type": "or",
      "components": {
        "type": "map",
        "components": {
          "type": "stat",
          "stat": "all_features"
        },
        "mapper": {
          "type": "equals",
          "components": {
            "type": "list",
            "components": [
              {
                "type": "toLowerCase",
                "components": {
                  "type": "stat",
                  "stat": "$mapValue.name"
                }
              },
              {
                "type": "constant",
                "value": "jack of all trades",
                "value_type": "string"
              }
            ]
          }
        }
      }
    }
  },
  {
    "id": "is_new_and_should_long_rest",
    "name": "Is new and should long rest?",
    "type": "base",
    "value_type": "bool",
    "default_value": true
  },
  {
    "id": "companions",
    "name": "Companions",
    "type": "base",
    "value_type": "array",
    "sub_value_type": "resource",
    "resource_type": "companion",
    "default_value": []
  },
  {
    "id": "companion_section_title",
    "name": "Companion section title",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "when",
      "clauses": [
        {
          "condition": {
            "type": "contains",
            "haystack": {
              "type": "map",
              "components": {
                "type": "stat",
                "stat": "classes"
              },
              "mapper": {
                "type": "toLowerCase",
                "components": {
                  "type": "trim",
                  "components": {
                    "type": "stat",
                    "stat": "$mapValue.class.name"
                  }
                }
              }
            },
            "needle": {
              "type": "constant",
              "value": "druid",
              "value_type": "string"
            }
          },
          "components": {
            "type": "constant",
            "value": "Wild shape",
            "value_type": "string"
          }
        },
        {
          "condition": {
            "type": "constant",
            "value": true,
            "value_type": "bool"
          },
          "components": {
            "type": "constant",
            "value": "Companions / familiars",
            "value_type": "string"
          }
        }
      ]
    }
  }
]