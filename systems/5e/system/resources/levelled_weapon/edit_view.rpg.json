{
  "id": "levelled_weapon_edit",
  "type": "composite",
  "subviews": [
    {
      "id": "levelled_weapon_edit_level",
      "type": "text",
      "edit_stat": "level",
      "style": "text",
      "hint": {
        "type": "constant",
        "value": "Lvl",
        "value_type": "string"
      },
      "max_length": 3
    },
    {
      "id": "levelled_weapon_edit_weapon_button",
      "type": "popUpButton",
      "text": {
        "type": "defaultIfNull",
        "components": {
          "type": "stat",
          "stat": "weapon?.damage_dice_display_description"
        },
        "default_components": {
          "type": "constant",
          "value": "No weapon",
          "value_type": "string"
        }
      },
      "pop_up_view": {
        "id": "levelled_weapon_edit_weapon",
        "type": "resource",
        "view_type": "edit",
        "resource_id": "weapon",
        "stat": "weapon",
        "create_if_empty": true
      },
      "pop_up_title": {
        "type": "constant",
        "value": "Edit weapon",
        "value_type": "string"
      },
      "display_cancel_button": true,
      "display_save_button": true,
      "validation_message": {
        "type": "when",
        "clauses": [
          {
            "condition": {
              "type": "isNull",
              "components": {
                "type": "stat",
                "stat": "weapon"
              }
            },
            "components": {
              "type": "constant",
              "value": "You have an empty levelled weapon. Please add a weapon to it or remove it.",
              "value_type": "string"
            }
          },
          {
            "condition": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            },
            "components": {
              "type": "constant",
              "value": null,
              "value_type": "string"
            }
          }
        ]
      }
    }
  ]
}