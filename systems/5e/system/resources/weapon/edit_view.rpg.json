{
  "id": "weapon_edit",
  "type": "list",
  "padding": 32,
  "subviews": [
    {
      "id": "weapon_edit_name",
      "type": "text",
      "edit_stat": "name",
      "style": "text",
      "label": {
        "type": "constant",
        "value": "Name",
        "value_type": "string"
      },
      "max_length": 140,
      "validation_message": {
        "type": "when",
        "clauses": [
          {
            "condition": {
              "type": "isEmpty",
              "components": {
                "type": "stat",
                "stat": "$view.weapon_edit_name"
              }
            },
            "components": {
              "type": "constant",
              "value": "Please add a name to your weapon",
              "value_type": "string"
            }
          },
          {
            "condition": {
              "type": "constant",
              "value": true,
              "value_type": "bool"
            },
            "components": {
              "type": "constant",
              "value": null,
              "value_type": "string"
            }
          }
        ]
      }
    },
    {
      "id": "weapon_edit_source_core",
      "type": "composite",
      "margin_top": 4,
      "subviews": [
        {
          "id": "weapon_edit_source",
          "type": "composite",
          "subviews": [
            {
              "id": "weapon_edit_source_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Source: ",
                "value_type": "string"
              },
              "style": "text"
            },
            {
              "id": "weapon_edit_source_select",
              "type": "select",
              "options": "source",
              "options_display_stat": "abbreviation",
              "stat": "source"
            }
          ]
        },
        {
          "id": "weapon_edit_is_core",
          "type": "checkbox",
          "stat": "is_core",
          "label": {
            "type": "constant",
            "value": "Core",
            "value_type": "string"
          },
          "label_alignment": "right"
        }
      ]
    },
    {
      "id": "weapon_edit_description",
      "type": "text",
      "edit_stat": "description",
      "label": {
        "type": "constant",
        "value": "Description",
        "value_type": "string"
      },
      "style": "text"
    },
    {
      "id": "weapon_edit_weight_cost_composite",
      "type": "composite",
      "margin_top": 4,
      "subviews": [
        {
          "id": "weapon_edit_price_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Price: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "weapon_edit_price",
          "type": "resource",
          "view_type": "edit",
          "resource_id": "cost",
          "stat": "cost",
          "create_if_empty": true
        },
        {
          "id": "weapon_edit_weight_label",
          "type": "text",
          "margin_left": 4,
          "text": {
            "type": "constant",
            "value": "Weight: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "weapon_edit_weight",
          "type": "resource",
          "view_type": "edit",
          "resource_id": "weight",
          "stat": "weight",
          "create_if_empty": true
        }
      ]
    },
    {
      "id": "weapon_edit_type_attack_ability",
      "type": "composite",
      "margin_top": 4,
      "subviews": [
        {
          "id": "weapon_edit_type_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Type: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "weapon_edit_type",
          "type": "select",
          "options": "weapon_types",
          "stat": "type"
        },
        {
          "id": "weapon_edit_attack_ability_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Atk. ability: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "weapon_edit_attack_ability",
          "type": "select",
          "options": "ability",
          "stat": "attack_ability"
        }
      ]
    },
    {
      "id": "weapon_edit_rarity_requires_attunement",
      "type": "composite",
      "margin_top": 4,
      "subviews": [
        {
          "id": "weapon_edit_rarity_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Rarity: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "weapon_edit_rarity",
          "type": "select",
          "options": "item_rarity",
          "stat": "rarity"
        },
        {
          "id": "weapon_edit_requires_attunement",
          "type": "checkbox",
          "stat": "requires_attunement",
          "label": {
            "type": "constant",
            "value": "Requires attunement",
            "value_type": "string"
          },
          "label_alignment": "right"
        }
      ]
    },
    {
      "id": "weapon_edit_properties_composite",
      "type": "composite",
      "subviews": [
        {
          "id": "weapon_edit_is_simple",
          "type": "checkbox",
          "stat": "is_simple",
          "label": {
            "type": "constant",
            "value": "Simple",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_two_handed",
          "type": "checkbox",
          "stat": "is_two_handed",
          "label": {
            "type": "constant",
            "value": "Two-handed",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_finesse",
          "type": "checkbox",
          "stat": "is_finesse",
          "label": {
            "type": "constant",
            "value": "Finesse",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "is_silver",
          "type": "checkbox",
          "stat": "is_silver",
          "label": {
            "type": "constant",
            "value": "Silver",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_heavy",
          "type": "checkbox",
          "stat": "is_heavy",
          "label": {
            "type": "constant",
            "value": "Heavy",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_light",
          "type": "checkbox",
          "stat": "is_light",
          "label": {
            "type": "constant",
            "value": "Light",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_loading",
          "type": "checkbox",
          "stat": "is_loading",
          "label": {
            "type": "constant",
            "value": "Loading",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_special",
          "type": "checkbox",
          "stat": "is_special",
          "label": {
            "type": "constant",
            "value": "Special",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_improvised",
          "type": "checkbox",
          "stat": "is_improvised",
          "label": {
            "type": "constant",
            "value": "Improvised",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_is_thrown",
          "type": "checkbox",
          "stat": "is_thrown",
          "label": {
            "type": "constant",
            "value": "Thrown",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_thrown_range",
          "type": "text",
          "edit_stat": "thrown_range",
          "style": "text",
          "max_length": 9,
          "hint": {
            "type": "constant",
            "value": "80/320",
            "value_type": "string"
          },
          "is_visible": {
            "type": "stat",
            "stat": "$view.weapon_edit_is_thrown"
          }
        },
        {
          "id": "weapon_edit_is_reach",
          "type": "checkbox",
          "stat": "is_reach",
          "label": {
            "type": "constant",
            "value": "Reach",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_reach_range",
          "type": "text",
          "edit_stat": "reach_range",
          "style": "text",
          "max_length": 3,
          "signed": false,
          "hint": {
            "type": "constant",
            "value": "5",
            "value_type": "string"
          },
          "is_visible": {
            "type": "stat",
            "stat": "$view.weapon_edit_is_reach"
          }
        },
        {
          "id": "weapon_edit_is_versatile",
          "type": "checkbox",
          "stat": "is_versatile",
          "label": {
            "type": "constant",
            "value": "Versatile",
            "value_type": "string"
          },
          "label_alignment": "right"
        }
      ]
    },
    {
      "id": "edit_weapon_range_composite",
      "type": "composite",
      "subviews": [
        {
          "id": "weapon_edit_is_range",
          "type": "checkbox",
          "stat": "is_range",
          "label": {
            "type": "constant",
            "value": "Range",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "weapon_edit_range_amount",
          "type": "text",
          "edit_stat": "range",
          "style": "text",
          "max_length": 9,
          "hint": {
            "type": "constant",
            "value": "80/320",
            "value_type": "string"
          },
          "is_visible": {
            "type": "stat",
            "stat": "$view.weapon_edit_is_range"
          }
        },
        {
          "id": "weapon_edit_ammunition_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Ammunition: ",
            "value_type": "string"
          },
          "style": "text",
          "is_visible": {
            "type": "stat",
            "stat": "$view.weapon_edit_is_range"
          }
        },
        {
          "id": "weapon_edit_ammunition_type",
          "type": "select",
          "options": "ammunition_types",
          "stat": "ammunition_type",
          "is_visible": {
            "type": "stat",
            "stat": "$view.weapon_edit_is_range"
          }
        }
      ]
    },
    {
      "id": "weapon_edit_extra_attack_bonus_override_is_proficient",
      "type": "composite",
      "subviews": [
        {
          "id": "weapon_edit_extra_attack_bonus_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Extra atk. bonus: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "weapon_edit_extra_attack_bonus",
          "type": "text",
          "edit_stat": "extra_attack_bonus",
          "style": "text",
          "max_length": 3,
          "signed": true,
          "hint": {
            "type": "constant",
            "value": "0",
            "value_type": "string"
          }
        },
        {
          "id": "weapon_edit_override_is_proficient",
          "type": "checkbox",
          "stat": "override_is_proficient",
          "label": {
            "type": "constant",
            "value": "Proficient",
            "value_type": "string"
          },
          "label_alignment": "right",
          "is_visible": {
            "type": "defined",
            "stat": "$character"
          }
        }
      ]
    },
    {
      "id": "weapon_edit_damage_dice",
      "type": "resourceArray",
      "resource_id": "damage_dice",
      "view_type": "edit",
      "left_view": {
        "id": "weapon_edit_damage_dice_label",
        "type": "text",
        "text": {
          "type": "constant",
          "value": "Damage dice: ",
          "value_type": "string"
        },
        "style": "text"
      },
      "stat": "damage_dice"
    },
    {
      "id": "weapon_edit_versatile_damage_dice",
      "type": "resourceArray",
      "resource_id": "damage_dice",
      "view_type": "edit",
      "left_view": {
        "id": "weapon_edit_versatile_damage_dice_label",
        "type": "text",
        "text": {
          "type": "constant",
          "value": "Versatile damage dice: ",
          "value_type": "string"
        },
        "style": "text"
      },
      "stat": "versatile_damage_dice",
      "is_visible": {
        "type": "stat",
        "stat": "$view.weapon_edit_is_versatile"
      }
    },
    {
      "id": "weapon_edit_effects",
      "type": "resourceArray",
      "resource_id": "effect",
      "view_type": "edit",
      "stat": "effects",
      "pop_up_type": "bottomSheet",
      "pop_up_button_text": {
        "type": "stat",
        "stat": "edit_display_name"
      },
      "left_view": {
        "id": "weapon_edit_effects_label",
        "type": "text",
        "text": {
          "type": "constant",
          "value": "Effects: ",
          "value_type": "string"
        },
        "style": "text"
      }
    }
  ]
}