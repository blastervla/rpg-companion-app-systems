{
  "id": "display_effect",
  "type": "list",
  "padding_left": 8,
  "subviews": [
    {
      "id": "display_effect_row_1",
      "type": "composite",
      "subviews": [
        {
          "id": "display_effect_text_list",
          "type": "list",
          "subviews": [
            {
              "id": "display_effect_name",
              "type": "text",
              "text": {
                "type": "stat",
                "stat": "name"
              },
              "style": "subhead",
              "max_lines": 1,
              "is_visible": {
                "type": "not",
                "components": {
                  "type": "isEmpty",
                  "components": {
                    "type": "stat",
                    "stat": "name"
                  }
                }
              }
            },
            {
              "id": "display_effect_description",
              "type": "text",
              "text": {
                "type": "stat",
                "stat": "current_level_description"
              },
              "style": "caption",
              "is_visible": {
                "type": "not",
                "components": {
                  "type": "isEmpty",
                  "components": {
                    "type": "stat",
                    "stat": "current_level_description"
                  }
                }
              }
            },
            {
              "id": "display_effect_subtitle",
              "type": "text",
              "max_lines": 2,
              "text": {
                "type": "concat",
                "components": {
                  "type": "list",
                  "components": [
                    {
                      "type": "constant",
                      "value": "- ",
                      "value_type": "string"
                    },
                    {
                      "type": "stat",
                      "stat": "display_subtitle"
                    }
                  ]
                }
              },
              "style": "caption"
            }
          ]
        }
      ]
    },
    {
      "id": "display_effect_row_2",
      "type": "composite",
      "alignment": "end",
      "subviews": [
        {
          "id": "display_effect_total_charges_unusuable",
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "max_charges_display_text"
          },
          "style": "subhead",
          "is_visible": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "not",
                  "components": {
                    "type": "defined",
                    "stat": "$character"
                  }
                },
                {
                  "type": "stat",
                  "stat": "has_charges"
                }
              ]
            }
          }
        },
        {
          "id": "display_effect_charges_ticker",
          "type": "ticker",
          "stat": "current_charges",
          "style": "title",
          "button_location": "right",
          "button_look": "plusMinus",
          "change_amount": 1,
          "min_value_allowed": 0,
          "should_auto_save": true,
          "label": {
            "type": "concat",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "constant",
                  "value": "/ ",
                  "value_type": "string"
                },
                {
                  "type": "stat",
                  "stat": "max_charges"
                }
              ]
            }
          },
          "label_alignment": "right",
          "is_visible": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defined",
                  "stat": "$character"
                },
                {
                  "type": "stat",
                  "stat": "has_charges"
                }
              ]
            }
          }
        },
        {
          "id": "display_effect_recharge_button",
          "type": "button",
          "text": {
            "type": "constant",
            "value": "RECHARGE",
            "value_type": "string"
          },
          "event": {
            "name": "recharge"
          },
          "is_visible": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defined",
                  "stat": "$character"
                },
                {
                  "type": "stat",
                  "stat": "has_charges"
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "recharge_event"
                      },
                      {
                        "type": "constant",
                        "value": "manual",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          }
        },
        {
          "id": "display_effect_use_button",
          "type": "button",
          "text": {
            "type": "constant",
            "value": "REVERT",
            "value_type": "string"
          },
          "event": {
            "name": "revert"
          },
          "is_visible": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defined",
                  "stat": "$character"
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "trigger_type"
                      },
                      {
                        "type": "constant",
                        "value": "active",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "type": "notEquals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "type"
                      },
                      {
                        "type": "constant",
                        "value": "none",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          }
        },
        {
          "id": "display_effect_use_button",
          "type": "button",
          "text": {
            "type": "constant",
            "value": "USE",
            "value_type": "string"
          },
          "event": {
            "name": "use"
          },
          "is_visible": {
            "type": "and",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "defined",
                  "stat": "$character"
                },
                {
                  "type": "equals",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "trigger_type"
                      },
                      {
                        "type": "constant",
                        "value": "active",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            }
          }
        }
      ]
    }
  ]
}