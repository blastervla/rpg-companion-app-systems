{
  "id": "item_display",
  "type": "list",
  "padding": 16,
  "subviews": [
    {
      "id": "item_display_current_quantity_composite",
      "type": "composite",
      "alignment": "end",
      "is_visible": {
        "type": "defined",
        "stat": "$character"
      },
      "subviews": [
        {
          "id": "item_display_current_quantity_ticker",
          "type": "ticker",
          "stat": "quantity",
          "style": "title"
        }
      ]
    },
    {
      "id": "item_display_info",
      "type": "composite",
      "subviews": [
        {
          "id": "item_display_source",
          "type": "text",
          "margin_left": 16,
          "style": "caption",
          "resource_id": "source",
          "resource_instance_ids_stat": "source",
          "resource_display_stat": "abbreviation"
        },
        {
          "id": "item_display_source_separator",
          "type": "text",
          "text": {
            "type": "constant",
            "value": ", ",
            "value_type": "string"
          },
          "style": "caption"
        },
        {
          "id": "item_display_properties",
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "properties"
          },
          "style": "caption",
          "is_visible": {
            "type": "not",
            "components": {
              "type": "isEmpty",
              "components": {
                "type": "stat",
                "stat": "properties"
              }
            }
          }
        }
      ]
    },
    {
      "id": "item_display_character_properties",
      "type": "composite",
      "subviews": [
        {
          "id": "item_display_equipped",
          "type": "text",
          "margin_left": 16,
          "text": {
            "type": "constant",
            "value": "Equipped",
            "value_type": "string"
          },
          "style": "caption",
          "color": {
            "type": "constant",
            "value": "#4CAF50",
            "value_type": "string"
          },
          "is_visible": {
            "type": "stat",
            "stat": "is_equipped"
          }
        },
        {
          "id": "item_display_attuned",
          "type": "text",
          "margin_left": 16,
          "text": {
            "type": "constant",
            "value": "Attuned",
            "value_type": "string"
          },
          "style": "caption",
          "color": {
            "type": "constant",
            "value": "#4CAF50",
            "value_type": "string"
          },
          "is_visible": {
            "type": "stat",
            "stat": "is_attuned"
          }
        }
      ],
      "is_visible": {
        "type": "defined",
        "stat": "$character"
      }
    },
    {
      "id": "item_display_price_and_weight",
      "type": "text",
      "margin_left": 16,
      "text": {
        "type": "stat",
        "stat": "price_and_weight"
      },
      "style": "caption",
      "is_visible": {
        "type": "not",
        "components": {
          "type": "isEmpty",
          "components": {
            "type": "stat",
            "stat": "price_and_weight"
          }
        }
      }
    },
    {
      "id": "item_display_description",
      "type": "text",
      "margin_top": 16,
      "text": {
        "type": "stat",
        "stat": "description"
      },
      "style": "text",
      "is_visible": {
        "type": "not",
        "components": {
          "type": "isEmpty",
          "components": {
            "type": "stat",
            "stat": "description"
          }
        }
      }
    },
    {
      "id": "item_display_effects_collapsible",
      "type": "collapsible",
      "margin_top": 8,
      "title": {
        "type": "constant",
        "value": "Magic effects",
        "value_type": "string"
      },
      "is_visible": {
        "type": "not",
        "components": {
          "type": "isEmpty",
          "components": {
            "type": "stat",
            "stat": "effects"
          }
        }
      },
      "subviews": [
        {
          "id": "item_display_effects",
          "type": "resourceArray",
          "resource_id": "effect",
          "stat": "effects",
          "view_type": "display"
        }
      ]
    },
    {
      "id": "item_quantity_composite",
      "type": "composite",
      "row_only": true,
      "alignment": "end",
      "is_visible": {
        "type": "defined",
        "stat": "$character"
      },
      "subviews": [
        {
          "id": "item_quantity_spacer",
          "type": "spacer"
        },
        {
          "id": "item_quantity",
          "type": "text",
          "edit_stat": "edit_quantity",
          "style": "text",
          "max_length": 12,
          "hint": {
            "type": "constant",
            "value": "Amount (default = 1)",
            "value_type": "string"
          }
        }
      ]
    },
    {
      "id": "item_display_attune_equip_add_remove_composite",
      "type": "composite",
      "row_only": true,
      "is_visible": {
        "type": "defined",
        "stat": "$character"
      },
      "subviews": [
        {
          "id": "item_display_attune_button",
          "type": "button",
          "text": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "is_attuned"
                },
                "components": {
                  "type": "constant",
                  "value": "UNATTUNE",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": "ATTUNE",
                  "value_type": "string"
                }
              }
            ]
          },
          "event": {
            "name": "toggle_attunement"
          },
          "is_visible": {
            "type": "stat",
            "stat": "requires_attunement"
          }
        },
        {
          "id": "item_display_equip_button",
          "type": "button",
          "text": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "stat",
                  "stat": "is_equipped"
                },
                "components": {
                  "type": "constant",
                  "value": "UNEQUIP",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": "EQUIP",
                  "value_type": "string"
                }
              }
            ]
          },
          "event": {
            "name": "toggle_equip"
          },
          "is_visible": {
            "type": "stat",
            "stat": "requires_equipping"
          }
        },
        {
          "id": "item_display_attune_equip_add_remove_spacer",
          "type": "spacer"
        },
        {
          "id": "item_display_add_button",
          "type": "button",
          "text": {
            "type": "constant",
            "value": "+ ADD",
            "value_type": "string"
          },
          "event": {
            "name": "add_quantity"
          }
        },
        {
          "id": "item_display_remove_button",
          "type": "button",
          "text": {
            "type": "constant",
            "value": "+ REMOVE",
            "value_type": "string"
          },
          "event": {
            "name": "subtract_quantity"
          }
        }
      ]
    }
  ]
}