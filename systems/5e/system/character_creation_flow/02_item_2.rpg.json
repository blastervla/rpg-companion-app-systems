{
  "title": {
    "id": "edit_about_title",
    "name": "About"
  },
  "view": {
    "id": "edit_character_about",
    "type": "list",
    "padding": 32,
    "subviews": [
      {
        "id": "edit_character_about_subheader",
        "type": "text",
        "text": {
          "type": "constant",
          "value": "Choose a background and an alignment",
          "value_type": "string"
        },
        "style": "subhead"
      },
      {
        "id": "edit_character_about_background_composite",
        "type": "composite",
        "subviews": [
          {
            "id": "edit_character_about_background_select",
            "type": "selectResources",
            "stat": "background",
            "resource_id": "background",
            "margin_right": 4,
            "margin_bottom": 4,
            "validation_message": {
              "type": "when",
              "clauses": [
                {
                  "condition": {
                    "type": "not",
                    "components": {
                      "type": "notNull",
                      "components": {
                        "type": "stat",
                        "stat": "$view.edit_character_about_background_select"
                      }
                    }
                  },
                  "components": {
                    "type": "constant",
                    "value": "Please pick a background",
                    "value_type": "string"
                  }
                },
                {
                  "condition": {
                    "type": "constant",
                    "value": true,
                    "value_type": "bool"
                  },
                  "components": {
                    "type": "constant",
                    "value": null,
                    "value_type": "string"
                  }
                }
              ]
            }
          },
          {
            "id": "edit_character_about_see_background_button",
            "type": "popUpButton",
            "text": {
              "type": "constant",
              "value": "SEE DETAILS",
              "value_type": "string"
            },
            "pop_up_view": {
              "id": "edit_character_about_see_background_bottom_sheet",
              "type": "resource",
              "view_type": "display",
              "resource_id": "background",
              "stat": "$view.edit_character_about_background_select"
            },
            "pop_up_title": {
              "type": "defaultIfNull",
              "components": {
                "type": "stat",
                "stat": "$view?.edit_character_about_background_select?.name"
              },
              "default_components": {
                "type": "constant",
                "value": "Background",
                "value_type": "string"
              }
            },
            "display_cancel_button": true,
            "cancel_text": {
              "type": "constant",
              "value": "OK",
              "value_type": "string"
            },
            "is_visible": {
              "type": "notEquals",
              "components": {
                "type": "list",
                "components": [
                  {
                    "type": "stat",
                    "stat": "$view?.edit_character_about_background_select?"
                  },
                  {
                    "type": "constant",
                    "value": null,
                    "value_type": "resource"
                  }
                ]
              }
            }
          }
        ]
      },
      {
        "id": "edit_character_about_alignment",
        "type": "select",
        "stat": "alignment",
        "options": "alignments",
        "margin_bottom": 4
      },
      {
        "id": "edit_character_about_subheader",
        "type": "text",
        "text": {
          "type": "constant",
          "value": "Write a bit about your character",
          "value_type": "string"
        },
        "style": "subhead"
      },
      {
        "id": "edit_character_about_personality_traits",
        "type": "text",
        "edit_stat": "personality_traits",
        "style": "text",
        "label": {
          "type": "constant",
          "value": "Personality traits",
          "value_type": "string"
        }
      },
      {
        "id": "edit_character_about_ideals",
        "type": "text",
        "edit_stat": "ideals",
        "style": "text",
        "label": {
          "type": "constant",
          "value": "Ideals",
          "value_type": "string"
        }
      },
      {
        "id": "edit_character_about_bonds",
        "type": "text",
        "edit_stat": "bonds",
        "style": "text",
        "label": {
          "type": "constant",
          "value": "Bonds",
          "value_type": "string"
        }
      },
      {
        "id": "edit_character_about_flaws",
        "type": "text",
        "edit_stat": "flaws",
        "style": "text",
        "label": {
          "type": "constant",
          "value": "Flaws",
          "value_type": "string"
        }
      },
      {
        "id": "edit_character_about_about",
        "type": "text",
        "edit_stat": "about",
        "style": "text",
        "label": {
          "type": "constant",
          "value": "About",
          "value_type": "string"
        }
      }
    ]
  },
  "post_edit": {
    "type": "when",
    "clauses": [
      {
        "condition": {
          "type": "stat",
          "stat": "$is_new"
        },
        "effect": {
          "type": "setStat",
          "stat": "gold_pieces",
          "new_value": {
            "type": "stat",
            "stat": "background.gold_pieces"
          },
          "aggregation_type": "set"
        }
      }
    ]
  }
}