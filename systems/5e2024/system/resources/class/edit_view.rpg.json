{
  "id": "class_edit",
  "type": "viewPager",
  "names": {
    "type": "list",
    "components": [
      {
        "type": "constant",
        "value": "Basic information",
        "value_type": "string"
      },
      {
        "type": "constant",
        "value": "Features",
        "value_type": "string"
      },
      {
        "type": "constant",
        "value": "Spellcasting",
        "value_type": "string"
      },
      {
        "type": "constant",
        "value": "Weapons & Equipment",
        "value_type": "string"
      },
      {
        "type": "constant",
        "value": "Proficiencies",
        "value_type": "string"
      },
      {
        "type": "constant",
        "value": "Archetypes",
        "value_type": "string"
      }
    ]
  },
  "color": {
    "type": "constant",
    "value": "#016157",
    "value_type": "string"
  },
  "subviews": [
    {
      "id": "class_edit_basics",
      "type": "list",
      "padding": 16,
      "subviews": [
        {
          "id": "class_edit_name",
          "type": "text",
          "edit_stat": "name",
          "style": "text",
          "label": {
            "type": "constant",
            "value": "Name",
            "value_type": "string"
          },
          "max_length": 140,
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "isEmpty",
                  "components": {
                    "type": "stat",
                    "stat": "$view.class_edit_name"
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "Please add a name to your class",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        },
        {
          "id": "class_edit_source",
          "margin_top": 4,
          "type": "composite",
          "subviews": [
            {
              "id": "class_edit_source_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Source: ",
                "value_type": "string"
              },
              "style": "text"
            },
            {
              "id": "class_edit_source_select",
              "type": "select",
              "options": "source",
              "options_display_stat": "abbreviation",
              "stat": "source"
            }
          ]
        },
        {
          "id": "class_edit_has_same_hp",
          "type": "checkbox",
          "stat": "same_hp_as_parent",
          "label": {
            "type": "constant",
            "value": "Has same HP as class",
            "value_type": "string"
          },
          "label_alignment": "right",
          "is_visible": {
            "type": "stat",
            "stat": "is_archetype"
          }
        },
        {
          "id": "class_edit_hp_composite",
          "type": "composite",
          "margin_top": 4,
          "is_visible": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "is_archetype"
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "defaultIfNull",
                    "components": {
                      "type": "stat",
                      "stat": "$view?.class_edit_has_same_hp"
                    },
                    "default_components": {
                      "type": "constant",
                      "value": false,
                      "value_type": "bool"
                    }
                  }
                }
              ]
            }
          },
          "subviews": [
            {
              "id": "class_edit_hit_die_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Hit die: ",
                "value_type": "string"
              },
              "style": "text",
              "bold": true
            },
            {
              "id": "class_edit_hit_die",
              "type": "select",
              "stat": "hit_die",
              "options": "dice"
            },
            {
              "id": "class_edit_hp_plus_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": " + ",
                "value_type": "string"
              },
              "style": "text"
            },
            {
              "id": "class_edit_hp_modifiers",
              "type": "select",
              "stat": "hp_modifiers",
              "options": "ability",
              "multi_select": true
            }
          ]
        },
        {
          "id": "class_edit_has_same_ac",
          "type": "checkbox",
          "stat": "same_ac_as_parent",
          "label": {
            "type": "constant",
            "value": "Has same AC as class",
            "value_type": "string"
          },
          "label_alignment": "right",
          "is_visible": {
            "type": "stat",
            "stat": "is_archetype"
          }
        },
        {
          "id": "class_edit_armor_composite",
          "type": "composite",
          "margin_top": 4,
          "is_visible": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "is_archetype"
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "defaultIfNull",
                    "components": {
                      "type": "stat",
                      "stat": "$view?.class_edit_has_same_ac"
                    },
                    "default_components": {
                      "type": "constant",
                      "value": false,
                      "value_type": "bool"
                    }
                  }
                }
              ]
            }
          },
          "subviews": [
            {
              "id": "class_edit_base_ac",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Base AC: ",
                "value_type": "string"
              },
              "style": "text",
              "bold": true
            },
            {
              "id": "class_edit_base_ac",
              "type": "text",
              "edit_stat": "base_ac",
              "style": "text",
              "max_length": 2,
              "signed": false,
              "hint": {
                "type": "constant",
                "value": "0",
                "value_type": "string"
              }
            },
            {
              "id": "class_edit_ac_plus_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": " + ",
                "value_type": "string"
              },
              "style": "text"
            },
            {
              "id": "class_edit_ac_modifiers",
              "type": "select",
              "stat": "ac_modifiers",
              "options": "ability",
              "multi_select": true
            }
          ]
        },
        {
          "id": "class_edit_saving_throw_proficiencies_label",
          "margin_top": 4,
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "saving_throws_text"
          },
          "style": "text",
          "bold": true
        },
        {
          "id": "class_edit_saving_throws_composite",
          "type": "composite",
          "alignment": "center",
          "subviews": [
            {
              "id": "class_edit_strength_saving_throw_proficiency_composite",
              "type": "list",
              "padding": 4,
              "alignment": "center",
              "subviews": [
                {
                  "id": "class_edit_strength_saving_throw_proficiency",
                  "type": "checkbox",
                  "stat": "strength_saving_throw_proficiency"
                },
                {
                  "id": "class_edit_strength_saving_throw_proficiency_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "STR",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              ]
            },
            {
              "id": "class_edit_dexterity_saving_throw_proficiency_composite",
              "type": "list",
              "padding": 4,
              "alignment": "center",
              "subviews": [
                {
                  "id": "class_edit_dexterity_saving_throw_proficiency",
                  "type": "checkbox",
                  "stat": "dexterity_saving_throw_proficiency"
                },
                {
                  "id": "class_edit_dexterity_saving_throw_proficiency_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "DEX",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              ]
            },
            {
              "id": "class_edit_constitution_saving_throw_proficiency_composite",
              "type": "list",
              "padding": 4,
              "alignment": "center",
              "subviews": [
                {
                  "id": "class_edit_constitution_saving_throw_proficiency",
                  "type": "checkbox",
                  "stat": "constitution_saving_throw_proficiency"
                },
                {
                  "id": "class_edit_constitution_saving_throw_proficiency_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "CON",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              ]
            },
            {
              "id": "class_edit_intelligence_saving_throw_proficiency_composite",
              "type": "list",
              "padding": 4,
              "alignment": "center",
              "subviews": [
                {
                  "id": "class_edit_intelligence_saving_throw_proficiency",
                  "type": "checkbox",
                  "stat": "intelligence_saving_throw_proficiency"
                },
                {
                  "id": "class_edit_intelligence_saving_throw_proficiency_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "INT",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              ]
            },
            {
              "id": "class_edit_wisdom_saving_throw_proficiency_composite",
              "type": "list",
              "padding": 4,
              "alignment": "center",
              "subviews": [
                {
                  "id": "class_edit_wisdom_saving_throw_proficiency",
                  "type": "checkbox",
                  "stat": "wisdom_saving_throw_proficiency"
                },
                {
                  "id": "class_edit_wisdom_saving_throw_proficiency_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "WIS",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              ]
            },
            {
              "id": "class_edit_charisma_saving_throw_proficiency_composite",
              "type": "list",
              "padding": 4,
              "alignment": "center",
              "subviews": [
                {
                  "id": "class_edit_charisma_saving_throw_proficiency",
                  "type": "checkbox",
                  "stat": "charisma_saving_throw_proficiency"
                },
                {
                  "id": "class_edit_charisma_saving_throw_proficiency_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "CHA",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "class_edit_features",
      "type": "list",
      "padding": 16,
      "subviews": [
        {
          "id": "class_edit_features",
          "type": "resourceArray",
          "resource_id": "feat",
          "stat": "features",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_features_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Features: ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          },
          "pop_up_type": "bottomSheet",
          "pop_up_button_text": {
            "type": "stat",
            "stat": "levelled_description"
          },
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "not",
                  "components": {
                    "type": "isEmpty",
                    "components": {
                      "type": "filter",
                      "components": {
                        "type": "stat",
                        "stat": "$view.class_edit_features"
                      },
                      "filter": {
                        "type": "isEmpty",
                        "components": {
                          "type": "stat",
                          "stat": "$filterValue.name"
                        }
                      }
                    }
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "You have empty features. Please add some content to them or remove them.",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "id": "class_edit_spells",
      "type": "list",
      "padding": 16,
      "subviews": [
        {
          "id": "class_edit_has_same_spellcasting_ability",
          "type": "checkbox",
          "stat": "same_spellcasting_ability_as_parent",
          "label": {
            "type": "constant",
            "value": "Has same spellcasting ability as class",
            "value_type": "string"
          },
          "label_alignment": "right",
          "is_visible": {
            "type": "stat",
            "stat": "is_archetype"
          }
        },
        {
          "id": "class_edit_spellcasting_ability_composite",
          "type": "composite",
          "margin_bottom": 4,
          "is_visible": {
            "type": "or",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "not",
                  "components": {
                    "type": "stat",
                    "stat": "is_archetype"
                  }
                },
                {
                  "type": "not",
                  "components": {
                    "type": "defaultIfNull",
                    "components": {
                      "type": "stat",
                      "stat": "$view?.class_edit_has_same_spellcasting_ability"
                    },
                    "default_components": {
                      "type": "constant",
                      "value": false,
                      "value_type": "bool"
                    }
                  }
                }
              ]
            }
          },
          "subviews": [
            {
              "id": "class_edit_spellcasting_ability_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Spellcasting Ability: ",
                "value_type": "string"
              },
              "style": "text",
              "bold": true
            },
            {
              "id": "class_edit_spellcasting_ability_select",
              "type": "select",
              "stat": "spellcasting_ability",
              "options": "ability"
            }
          ]
        },
        {
          "id": "class_edit_has_same_effective_caster_level",
          "type": "checkbox",
          "stat": "same_effective_caster_level_as_parent",
          "label": {
            "type": "constant",
            "value": "Has same caster level as class",
            "value_type": "string"
          },
          "label_alignment": "right",
          "is_visible": {
            "type": "stat",
            "stat": "is_archetype"
          }
        },
        {
          "id": "class_edit_effective_caster_level_composite",
          "type": "composite",
          "is_visible": {
            "type": "stat",
            "stat": "should_ask_for_effective_caster_level"
          },
          "subviews": [
            {
              "id": "class_edit_effective_caster_level_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Effective caster level: ",
                "value_type": "string"
              },
              "style": "text",
              "bold": true
            },
            {
              "id": "class_edit_effective_caster_level",
              "type": "select",
              "stat": "effective_caster_level",
              "options": "effective_caster_level_types"
            }
          ]
        },
        {
          "id": "class_edit_spell_slots_per_level",
          "type": "list",
          "padding": 0,
          "is_visible": {
            "type": "stat",
            "stat": "should_fill_custom_spell_slots"
          },
          "subviews": [
            {
              "id": "class_edit_spell_recharge_slots_on_short_rest",
              "type": "checkbox",
              "stat": "recharge_slots_on_short_rest",
              "label": {
                "type": "constant",
                "value": "Recharge slots on short rest",
                "value_type": "string"
              },
              "label_alignment": "right"
            },
            {
              "id": "class_edit_spell_slots_per_level_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Spell slots:",
                "value_type": "string"
              },
              "style": "text",
              "bold": true
            },
            {
              "id": "class_edit_spell_slots_level_1_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 1",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_1_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_1_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_1_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 1 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_2_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 2",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_2_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_2_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_2_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 2 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_3_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 3",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_3_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_3_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_3_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 3 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_4_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 4",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_4_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_4_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_4_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 4 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_5_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 5",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_5_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_5_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_5_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 5 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_6_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 6",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_6_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_6_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_6_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 6 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_7_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 7",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_7_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_7_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_7_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 7 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_8_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 8",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_8_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_8_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_8_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 8 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            },
            {
              "id": "class_edit_spell_slots_level_9_per_level_bottom_sheet_button",
              "type": "popUpButton",
              "text": {
                "type": "constant",
                "value": "Level 9",
                "value_type": "string"
              },
              "pop_up_view": {
                "id": "class_edit_spell_slots_level_9_per_level",
                "type": "resourceArray",
                "resource_id": "levelled_amount",
                "stat": "spell_slots_level_9_per_level",
                "view_type": "edit",
                "left_view": {
                  "id": "class_edit_spell_slots_level_9_per_level_label",
                  "type": "text",
                  "text": {
                    "type": "constant",
                    "value": "Max. amount per level: ",
                    "value_type": "string"
                  },
                  "style": "text"
                }
              },
              "pop_up_title": {
                "type": "constant",
                "value": "Edit Level 9 Slots",
                "value_type": "string"
              },
              "display_cancel_button": true,
              "display_save_button": true
            }
          ]
        },
        {
          "id": "class_edit_spells",
          "type": "resourceArray",
          "resource_id": "levelled_spell",
          "stat": "spells",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_spells_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Spells (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          }
        }
      ]
    },
    {
      "id": "class_edit_weapons_and_equipment",
      "type": "list",
      "padding": 16,
      "subviews": [
        {
          "id": "class_edit_weapon",
          "type": "resourceArray",
          "resource_id": "levelled_weapon",
          "stat": "weapon",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_weapon_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Class weapon (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          }
        },
        {
          "id": "class_edit_attacks_per_action",
          "type": "resourceArray",
          "resource_id": "levelled_amount",
          "stat": "attacks_per_action_per_level",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_attacks_per_action_label",
            "type": "text",
            "text": {
              "type": "stat",
              "stat": "attacks_per_action_text"
            },
            "style": "text",
            "bold": true
          }
        },
        {
          "id": "class_edit_selectable_armors",
          "type": "resourceArray",
          "resource_id": "selectable_armors",
          "stat": "selectable_armors",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_selectable_armors_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Armor choices: ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          },
          "pop_up_type": "bottomSheet",
          "pop_up_button_text": {
            "type": "stat",
            "stat": "display_description"
          },
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "is_archetype"
            }
          },
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "not",
                  "components": {
                    "type": "isEmpty",
                    "components": {
                      "type": "filter",
                      "components": {
                        "type": "stat",
                        "stat": "$view.class_edit_selectable_armors"
                      },
                      "filter": {
                        "type": "isEmpty",
                        "components": {
                          "type": "stat",
                          "stat": "$filterValue.options"
                        }
                      }
                    }
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "You have empty armor options. Please select some armors or remove it.",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        },
        {
          "id": "class_edit_selectable_weapons",
          "type": "resourceArray",
          "resource_id": "selectable_weapons",
          "stat": "selectable_weapons",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_selectable_weapons_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Weapon choices: ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          },
          "pop_up_type": "bottomSheet",
          "pop_up_button_text": {
            "type": "stat",
            "stat": "display_description"
          },
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "is_archetype"
            }
          },
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "not",
                  "components": {
                    "type": "isEmpty",
                    "components": {
                      "type": "filter",
                      "components": {
                        "type": "stat",
                        "stat": "$view.class_edit_selectable_weapons"
                      },
                      "filter": {
                        "type": "isEmpty",
                        "components": {
                          "type": "stat",
                          "stat": "$filterValue.options"
                        }
                      }
                    }
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "You have empty weapon options. Please select some weapons or remove it.",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        },
        {
          "id": "class_edit_selectable_equipments",
          "type": "resourceArray",
          "resource_id": "selectable_items",
          "stat": "selectable_equipments",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_selectable_equipments_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Equipment choices: ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          },
          "pop_up_type": "bottomSheet",
          "pop_up_button_text": {
            "type": "stat",
            "stat": "display_description"
          },
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "is_archetype"
            }
          },
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "not",
                  "components": {
                    "type": "isEmpty",
                    "components": {
                      "type": "filter",
                      "components": {
                        "type": "stat",
                        "stat": "$view.class_edit_selectable_equipments"
                      },
                      "filter": {
                        "type": "isEmpty",
                        "components": {
                          "type": "stat",
                          "stat": "$filterValue.options"
                        }
                      }
                    }
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "You have empty equipment options. Please select some equipments or remove it.",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "id": "class_edit_proficiencies",
      "type": "list",
      "padding": 16,
      "subviews": [
        {
          "id": "class_edit_language_proficiencies",
          "type": "resourceArray",
          "resource_id": "levelled_choice_text",
          "stat": "language_proficiencies",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_language_proficiencies_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Language proficiency choices (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          }
        },
        {
          "id": "class_edit_skill_proficiencies_multiclass_check",
          "type": "checkbox",
          "stat": "account_for_skill_proficiencies_on_multiclass",
          "label": {
            "type": "constant",
            "value": "Grant skill proficiencies on multiclass",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "class_edit_skill_proficiencies",
          "type": "resourceArray",
          "resource_id": "levelled_skill_proficiency",
          "stat": "skill_proficiencies",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_skill_proficiencies_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Skill proficiency choices (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          },
          "pop_up_type": "bottomSheet",
          "pop_up_button_text": {
            "type": "stat",
            "stat": "description"
          },
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "not",
                  "components": {
                    "type": "isEmpty",
                    "components": {
                      "type": "filter",
                      "components": {
                        "type": "stat",
                        "stat": "$view.class_edit_skill_proficiencies"
                      },
                      "filter": {
                        "type": "isEmpty",
                        "components": {
                          "type": "stat",
                          "stat": "$filterValue.options"
                        }
                      }
                    }
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "You have empty levelled skill proficiencies. Please add some skills to them or remove them.",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        },
        {
          "id": "class_edit_armor_proficiencies_multiclass_check",
          "type": "checkbox",
          "stat": "account_for_armor_proficiencies_on_multiclass",
          "label": {
            "type": "constant",
            "value": "Grant armor proficiencies on multiclass",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "class_edit_armor_proficiencies",
          "type": "resourceArray",
          "resource_id": "levelled_armor_proficiency",
          "stat": "armor_proficiencies",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_armor_proficiencies_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Armor proficiency choices (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          }
        },
        {
          "id": "class_edit_weapon_proficiencies_multiclass_check",
          "type": "checkbox",
          "stat": "account_for_weapon_proficiencies_on_multiclass",
          "label": {
            "type": "constant",
            "value": "Grant weapon proficiencies on multiclass",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "class_edit_weapon_proficiencies",
          "type": "resourceArray",
          "resource_id": "levelled_weapon_proficiency",
          "stat": "weapon_proficiencies",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_weapon_proficiencies_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Weapon proficiency choices (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          }
        },
        {
          "id": "class_edit_tool_proficiencies_multiclass_check",
          "type": "checkbox",
          "stat": "account_for_tool_proficiencies_on_multiclass",
          "label": {
            "type": "constant",
            "value": "Grant tool proficiencies on multiclass",
            "value_type": "string"
          },
          "label_alignment": "right"
        },
        {
          "id": "class_edit_tool_proficiencies",
          "type": "resourceArray",
          "resource_id": "levelled_choice_text",
          "stat": "tool_proficiencies",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_tool_proficiencies_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Tool proficiency choices (per lvl): ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          }
        }
      ]
    },
    {
      "id": "class_edit_archetypes_list",
      "type": "list",
      "padding": 16,
      "subviews": [
        {
          "id": "class_edit_archetype_selection_level_composite",
          "type": "composite",
          "subviews": [
            {
              "id": "class_edit_archetype_selection_level_label",
              "type": "text",
              "text": {
                "type": "constant",
                "value": "Archetype selection level: ",
                "value_type": "string"
              },
              "style": "text",
              "bold": true
            },
            {
              "id": "class_edit_archetype_selection_level",
              "type": "text",
              "edit_stat": "archetype_selection_level",
              "style": "text",
              "max_length": 2,
              "hint": {
                "type": "constant",
                "value": "3",
                "value_type": "string"
              }
            }
          ],
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "is_archetype"
            }
          }
        },
        {
          "id": "class_edit_archetypes",
          "type": "resourceArray",
          "resource_id": "class",
          "stat": "archetypes",
          "view_type": "edit",
          "left_view": {
            "id": "class_edit_archetypes_label",
            "type": "text",
            "text": {
              "type": "constant",
              "value": "Archetypes: ",
              "value_type": "string"
            },
            "style": "text",
            "bold": true
          },
          "pop_up_type": "window",
          "pop_up_button_text": {
            "type": "stat",
            "stat": "name"
          },
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "is_archetype"
            }
          },
          "validation_message": {
            "type": "when",
            "clauses": [
              {
                "condition": {
                  "type": "not",
                  "components": {
                    "type": "isEmpty",
                    "components": {
                      "type": "filter",
                      "components": {
                        "type": "stat",
                        "stat": "$view.class_edit_archetypes"
                      },
                      "filter": {
                        "type": "isEmpty",
                        "components": {
                          "type": "stat",
                          "stat": "$filterValue.name"
                        }
                      }
                    }
                  }
                },
                "components": {
                  "type": "constant",
                  "value": "You have empty archetypes. Please edit them or delete them.",
                  "value_type": "string"
                }
              },
              {
                "condition": {
                  "type": "constant",
                  "value": true,
                  "value_type": "bool"
                },
                "components": {
                  "type": "constant",
                  "value": null,
                  "value_type": "string"
                }
              }
            ]
          }
        },
        {
          "id": "class_edit_archetypes_no_archetypes_message",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Archetypes cannot have archetypes!",
            "value_type": "string"
          },
          "style": "text",
          "bold": true,
          "is_visible": {
            "type": "stat",
            "stat": "is_archetype"
          }
        }
      ]
    }
  ]
}