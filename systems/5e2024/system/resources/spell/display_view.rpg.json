{
  "id": "spell_display",
  "type": "list",
  "padding": 16,
  "subviews": [
    {
      "id": "spell_display_info",
      "type": "composite",
      "subviews": [
        {
          "id": "spell_display_source",
          "type": "text",
          "margin_left": 16,
          "style": "caption",
          "resource_id": "source",
          "resource_instance_ids_stat": "source",
          "resource_display_stat": "abbreviation"
        },
        {
          "id": "spell_display_source_separator",
          "type": "text",
          "text": {
            "type": "constant",
            "value": ", ",
            "value_type": "string"
          },
          "style": "caption"
        },
        {
          "id": "spell_display_classes",
          "type": "text",
          "resource_id": "class",
          "resource_instance_ids_stat": "classes",
          "resource_display_stat": "name",
          "style": "caption"
        }
      ]
    },
    {
      "id": "spell_display_type",
      "type": "text",
      "margin_left": 16,
      "text": {
        "type": "stat",
        "stat": "display_type"
      },
      "style": "caption"
    },
    {
      "id": "spell_display_casting_time_composite",
      "type": "composite",
      "margin_top": 16,
      "subviews": [
        {
          "id": "spell_display_casting_time_subtitle",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Casting Time: ",
            "value_type": "string"
          },
          "style": "text",
          "bold": true
        },
        {
          "id": "spell_display_casting_time_label",
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "display_casting_time"
          },
          "style": "text"
        }
      ]
    },
    {
      "id": "spell_display_range_composite",
      "type": "composite",
      "subviews": [
        {
          "id": "spell_display_range_subtitle",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Range: ",
            "value_type": "string"
          },
          "style": "text",
          "bold": true
        },
        {
          "id": "spell_display_range_label",
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "range"
          },
          "style": "text"
        }
      ]
    },
    {
      "id": "spell_display_components_composite",
      "type": "composite",
      "subviews": [
        {
          "id": "spell_display_components_subtitle",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Components: ",
            "value_type": "string"
          },
          "style": "text",
          "bold": true
        },
        {
          "id": "spell_display_components_label",
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "full_components"
          },
          "style": "text"
        }
      ],
      "is_visible": {
        "type": "stat",
        "stat": "has_components"
      }
    },
    {
      "id": "spell_display_duration_composite",
      "type": "composite",
      "subviews": [
        {
          "id": "spell_display_duration_subtitle",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Duration: ",
            "value_type": "string"
          },
          "style": "text",
          "bold": true
        },
        {
          "id": "spell_display_duration_label",
          "type": "text",
          "text": {
            "type": "stat",
            "stat": "duration"
          },
          "style": "text"
        }
      ]
    },
    {
      "id": "spell_display_description_label",
      "type": "text",
      "margin_top": 16,
      "text": {
        "type": "stat",
        "stat": "description"
      },
      "is_visible": {
        "type": "not",
        "components": {
          "type": "isEmpty",
          "components": {
            "type": "stat",
            "stat": "description"
          }
        }
      },
      "style": "text"
    },
    {
      "id": "spell_display_higher_level_description_subtitle",
      "type": "text",
      "margin_top": 16,
      "text": {
        "type": "constant",
        "value": "At Higher Levels: ",
        "value_type": "string"
      },
      "style": "text",
      "bold": true,
      "is_visible": {
        "type": "stat",
        "stat": "has_higher_level_description"
      }
    },
    {
      "id": "spell_display_higher_level_description_label",
      "type": "text",
      "text": {
        "type": "stat",
        "stat": "higher_level_description"
      },
      "style": "text",
      "is_visible": {
        "type": "stat",
        "stat": "has_higher_level_description"
      }
    },
    {
      "id": "spell_display_dice_collapsible",
      "type": "collapsible",
      "margin_top": 8,
      "title": {
        "type": "constant",
        "value": "Damage dice",
        "value_type": "string"
      },
      "is_visible": {
        "type": "not",
        "components": {
          "type": "isEmpty",
          "components": {
            "type": "stat",
            "stat": "dice"
          }
        }
      },
      "subviews": [
        {
          "id": "spell_display_levelled_dice",
          "type": "resourceArray",
          "resource_id": "levelled_damage_dice",
          "stat": "dice",
          "view_type": "display"
        }
      ]
    },
    {
      "id": "spell_display_effects_collapsible",
      "type": "collapsible",
      "margin_top": 8,
      "start_expanded": true,
      "title": {
        "type": "constant",
        "value": "Magic effects",
        "value_type": "string"
      },
      "is_visible": {
        "type": "not",
        "components": {
          "type": "isEmpty",
          "components": {
            "type": "stat",
            "stat": "effects"
          }
        }
      },
      "subviews": [
        {
          "id": "spell_display_effects",
          "type": "resourceArray",
          "resource_id": "effect",
          "stat": "effects",
          "view_type": "display"
        }
      ]
    },
    {
      "id": "spell_display_cast_composite",
      "type": "composite",
      "margin_top": 16,
      "is_visible": {
        "type": "stat",
        "stat": "should_select_spell_slot_to_cast"
      },
      "subviews": [
        {
          "id": "spell_display_cast_composite_level_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Level: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "spell_display_cast_composite_ticker",
          "type": "ticker",
          "stat": "cast_level",
          "style": "headline",
          "button_location": "sideToSide",
          "button_look": "upDown",
          "allowed_values": {
            "type": "stat",
            "stat": "available_slots_for_use"
          }
        },
        {
          "id": "spell_display_cast_composite_slots_remaining_label",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Slots remaining: ",
            "value_type": "string"
          },
          "style": "text"
        },
        {
          "id": "spell_display_slots_remaining_composite_ticker",
          "type": "ticker",
          "stat": "available_selected_slots",
          "style": "headline",
          "is_visible": {
            "type": "defined",
            "stat": "$view.spell_display_cast_composite_ticker"
          }
        }
      ]
    },
    {
      "id": "spell_display_cast_section_list",
      "type": "list",
      "is_visible": {
        "type": "defined",
        "stat": "$character"
      },
      "margin_top": 8,
      "subviews": [
        {
          "id": "spell_display_cast_explanation",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "Can't cast when wearing armor you are not proficient with",
            "value_type": "string"
          },
          "color": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          },
          "bold": true,
          "style": "text",
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "character_is_not_wearing_inproficient_armor"
            }
          }
        },
        {
          "id": "spell_display_cast_explanation_spell_slots",
          "type": "text",
          "text": {
            "type": "constant",
            "value": "You don't have the required spell slots to cast this spell right now",
            "value_type": "string"
          },
          "color": {
            "type": "constant",
            "value": "accent",
            "value_type": "string"
          },
          "bold": true,
          "style": "text",
          "is_visible": {
            "type": "not",
            "components": {
              "type": "stat",
              "stat": "has_required_spell_slots_to_cast"
            }
          }
        },
        {
          "id": "spell_display_cast_button_composite",
          "type": "composite",
          "row_only": true,
          "subviews": [
            {
              "id": "spell_display_prepare_button",
              "type": "button",
              "text": {
                "type": "stat",
                "stat": "prepare_button_text"
              },
              "is_visible": {
                "type": "not",
                "components": {
                  "type": "stat",
                  "stat": "is_cantrip"
                }
              },
              "event": {
                "name": "togglePrepareSpell",
                "payload": {}
              }
            },
            {
              "id": "spell_display_cast_button_spacer",
              "type": "spacer"
            },
            {
              "id": "spell_display_cast_button",
              "type": "button",
              "text": {
                "type": "constant",
                "value": "CAST",
                "value_type": "string"
              },
              "enabled": {
                "type": "stat",
                "stat": "can_cast"
              },
              "event": {
                "name": "castSpell",
                "payload": {}
              }
            }
          ]
        }
      ]
    }
  ]
}