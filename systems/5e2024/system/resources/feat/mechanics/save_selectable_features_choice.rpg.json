{
  "id": "save_selectable_features_choice",
  "event_names": "saveSelectableFeaturesChoice",
  "effects": {
    "type": "sequence",
    "effects": [
      {
        "type": "setStat",
        "meta_stat": {
          "type": "stat",
          "stat": "selected_selectable_feature_ids_stat_path"
        },
        "new_value": {
          "type": "flatAppend",
          "treat_as_set": true,
          "components": [
            {
              "type": "filter",
              "components": {
                "type": "metaStat",
                "meta_stat": {
                  "type": "stat",
                  "stat": "selected_selectable_feature_ids_stat_path"
                }
              },
              "filter": {
                "type": "not",
                "components": {
                  "type": "contains",
                  "haystack": {
                    "type": "stat",
                    "stat": "selectable_feature_ids"
                  },
                  "needle": {
                    "type": "stat",
                    "stat": "$filterValue"
                  }
                }
              }
            },
            {
              "type": "stat",
              "stat": "$view.feat_display_selectable_features_select"
            }
          ]
        },
        "aggregation_type": "set"
      },
      {
        "type": "delayed",
        "millis": 100,
        "effect": {
          "type": "dismissResource"
        }
      }
    ]
  }
}