[
  {
    "id": "dice_amount",
    "name": "Dice amount",
    "abbreviation": "Amnt.",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "dice_type",
    "name": "Dice type",
    "abbreviation": "Dice",
    "type": "base",
    "value_type": "string",
    "default_value": "d4"
  },
  {
    "id": "constant",
    "name": "Constant",
    "abbreviation": "Const",
    "type": "base",
    "value_type": "integer",
    "default_value": 0
  },
  {
    "id": "formula",
    "name": "Formula",
    "type": "calculated",
    "value_type": "string",
    "components": {
      "type": "trim",
      "components": {
        "type": "concat",
        "components": {
          "type": "flatAppend",
          "components": [
            {
              "type": "when",
              "clauses": [
                {
                  "condition": {
                    "type": "notEquals",
                    "components": {
                      "type": "list",
                      "components": [
                        {
                          "type": "stat",
                          "stat": "dice_amount"
                        },
                        {
                          "type": "constant",
                          "value": 0,
                          "value_type": "integer"
                        }
                      ]
                    }
                  },
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "dice_amount"
                      },
                      {
                        "type": "stat",
                        "stat": "dice_type"
                      }
                    ]
                  }
                },
                {
                  "condition": {
                    "type": "constant",
                    "value": true,
                    "value_type": "bool"
                  },
                  "components": {
                    "type": "list",
                    "components": []
                  }
                }
              ]
            },
            {
              "type": "when",
              "clauses": [
                {
                  "condition": {
                    "type": "lessThanEquals",
                    "components": {
                      "type": "list",
                      "components": [
                        {
                          "type": "stat",
                          "stat": "constant"
                        },
                        {
                          "type": "constant",
                          "value": 0,
                          "value_type": "integer"
                        }
                      ]
                    }
                  },
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": " ",
                        "value_type": "string"
                      }
                    ]
                  }
                },
                {
                  "condition": {
                    "type": "constant",
                    "value": true,
                    "value_type": "bool"
                  },
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "constant",
                        "value": " + ",
                        "value_type": "string"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "type": "when",
              "clauses": [
                {
                  "condition": {
                    "type": "or",
                    "components": {
                      "type": "list",
                      "components": [
                        {
                          "type": "notEquals",
                          "components": {
                            "type": "list",
                            "components": [
                              {
                                "type": "stat",
                                "stat": "constant"
                              },
                              {
                                "type": "constant",
                                "value": 0,
                                "value_type": "integer"
                              }
                            ]
                          }
                        },
                        {
                          "type": "equals",
                          "components": {
                            "type": "list",
                            "components": [
                              {
                                "type": "stat",
                                "stat": "dice_amount"
                              },
                              {
                                "type": "constant",
                                "value": 0,
                                "value_type": "integer"
                              }
                            ]
                          }
                        }
                      ]
                    }
                  },
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "constant"
                      }
                    ]
                  }
                },
                {
                  "condition": {
                    "type": "constant",
                    "value": true,
                    "value_type": "bool"
                  },
                  "components": {
                    "type": "list",
                    "components": []
                  }
                }
              ]
            }
          ]
        }
      }
    }
  },
  {
    "id": "average",
    "name": "Average",
    "type": "calculated",
    "value_type": "integer",
    "components": {
      "type": "add",
      "components": {
        "type": "list",
        "components": [
          {
            "type": "divide",
            "rounding_method": "down",
            "components": {
              "type": "list",
              "components": [
                {
                  "type": "multiply",
                  "components": {
                    "type": "list",
                    "components": [
                      {
                        "type": "stat",
                        "stat": "dice_amount"
                      },
                      {
                        "type": "when",
                        "clauses": [
                          {
                            "condition": {
                              "type": "equals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "stat",
                                    "stat": "dice_type"
                                  },
                                  {
                                    "type": "constant",
                                    "value": "d4",
                                    "value_type": "string"
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "constant",
                              "value": 2.5,
                              "value_type": "integer"
                            }
                          },
                          {
                            "condition": {
                              "type": "equals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "stat",
                                    "stat": "dice_type"
                                  },
                                  {
                                    "type": "constant",
                                    "value": "d6",
                                    "value_type": "string"
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "constant",
                              "value": 3.5,
                              "value_type": "integer"
                            }
                          },
                          {
                            "condition": {
                              "type": "equals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "stat",
                                    "stat": "dice_type"
                                  },
                                  {
                                    "type": "constant",
                                    "value": "d8",
                                    "value_type": "string"
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "constant",
                              "value": 4.5,
                              "value_type": "integer"
                            }
                          },
                          {
                            "condition": {
                              "type": "equals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "stat",
                                    "stat": "dice_type"
                                  },
                                  {
                                    "type": "constant",
                                    "value": "d10",
                                    "value_type": "string"
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "constant",
                              "value": 5.5,
                              "value_type": "integer"
                            }
                          },
                          {
                            "condition": {
                              "type": "equals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "stat",
                                    "stat": "dice_type"
                                  },
                                  {
                                    "type": "constant",
                                    "value": "d12",
                                    "value_type": "string"
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "constant",
                              "value": 6.5,
                              "value_type": "integer"
                            }
                          },
                          {
                            "condition": {
                              "type": "equals",
                              "components": {
                                "type": "list",
                                "components": [
                                  {
                                    "type": "stat",
                                    "stat": "dice_type"
                                  },
                                  {
                                    "type": "constant",
                                    "value": "d20",
                                    "value_type": "string"
                                  }
                                ]
                              }
                            },
                            "components": {
                              "type": "constant",
                              "value": 10.5,
                              "value_type": "integer"
                            }
                          },
                          {
                            "condition": {
                              "type": "constant",
                              "value": true,
                              "value_type": "bool"
                            },
                            "components": {
                              "type": "constant",
                              "value": 1,
                              "value_type": "integer"
                            }
                          }
                        ]
                      }
                    ]
                  }
                },
                {
                  "type": "constant",
                  "value": 1,
                  "value_type": "integer"
                }
              ]
            }
          },
          {
            "type": "stat",
            "stat": "constant"
          }
        ]
      }
    }
  }
]